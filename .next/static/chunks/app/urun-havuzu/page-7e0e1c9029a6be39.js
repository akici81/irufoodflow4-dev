(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{989:function(e,t,a){Promise.resolve().then(a.bind(a,2178))},5561:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var r=a(7821),n=a(4233),l=a(168),i=a(8078),s=a(4786);let o={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function d(e){var t;let{children:a,title:d,subtitle:u}=e,m=(0,l.usePathname)(),c=(0,l.useRouter)(),[x,g]=(0,i.useState)(null),[h,p]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{(async()=>{let e=localStorage.getItem("aktifKullaniciId");if(!e){c.push("/");return}let{data:t,error:a}=await s.O.from("kullanicilar").select("id, username, ad_soyad, role").eq("id",e).single();if(a||!t){c.push("/");return}g(t)})()},[c]),!x)return null;let f=null!==(t=o[x.role])&&void 0!==t?t:[],y=(x.ad_soyad||x.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,r.jsx)("button",{onClick:()=>p(!h),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),h&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>p(!1)}),(0,r.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ".concat(h?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),(0,r.jsx)("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),(0,r.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:f.map(e=>{let t=m===e.path;return(0,r.jsx)(n.default,{href:e.path,className:"flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ".concat(t?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"),children:e.name},e.path)})}),(0,r.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("span",{className:"text-white text-xs font-bold",children:y})}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",children:x.ad_soyad||x.username}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:x.role})]})]}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),c.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[d&&(0,r.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[u&&(0,r.jsx)("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:u}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:d})]}),(0,r.jsx)("div",{className:"flex-1 p-8",children:a})]})]})}},7951:function(e,t,a){"use strict";a.d(t,{a:function(){return i}});var r=a(8078),n=a(168);let l={"/admin":["admin"],"/kullanicilar":["admin"],"/dersler":["admin","bolum_baskani"],"/siparisler":["admin"],"/siparis-yonetimi":["admin"],"/urun-havuzu":["admin","ogretmen"],"/receteler":["admin","ogretmen"],"/bolum-baskani":["admin","bolum_baskani"],"/ogretmen":["admin","ogretmen"],"/alisveris-listelerim":["admin","ogretmen"],"/siparislerim":["admin","ogretmen"],"/talep":["admin","ogretmen"],"/satin":["admin","satin_alma"],"/stok":["admin","stok"]};function i(e){let t=(0,n.useRouter)(),[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let a=localStorage.getItem("aktifKullaniciId"),r=localStorage.getItem("role");if(!a||!r){t.replace("/");return}let n=l[e];if(!n){i(!0),o(!1);return}n.includes(r)?(i(!0),o(!1)):t.replace({admin:"/admin",ogretmen:"/ogretmen",satin_alma:"/satin",stok:"/stok",bolum_baskani:"/bolum-baskani"}[r]||"/")},[e,t]),{yetkili:a,yukleniyor:s}}},2178:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var r=a(7821),n=a(8078),l=a(5561),i=a(7951),s=a(4786);let o=["Kg","L","Paket","Adet","G","Ml","Kutu"],d={urunAdi:"",marka:"",fiyat:0,olcu:"Kg",kategori:"",market:"",stok:0,kod:"",notlar:""};function u(){let{yetkili:e,yukleniyor:t}=(0,i.a)("/urun-havuzu");if(t)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[u,m]=(0,n.useState)([]),[c,x]=(0,n.useState)(""),[g,h]=(0,n.useState)("T\xfcm\xfc"),[p,f]=(0,n.useState)("T\xfcm\xfc"),[y,b]=(0,n.useState)(d),[k,v]=(0,n.useState)(null),[j,N]=(0,n.useState)(!1),[w,S]=(0,n.useState)(null),[C,z]=(0,n.useState)(!0),[I,A]=(0,n.useState)(""),_=(0,n.useRef)(null);(0,n.useEffect)(()=>{A(localStorage.getItem("role")||""),T()},[]);let T=async()=>{z(!0);let{data:e}=await s.O.from("urunler").select("*").order("urun_adi");m((e||[]).map(e=>({id:e.id,urunAdi:e.urun_adi,marka:e.marka,fiyat:e.fiyat,olcu:e.olcu,kategori:e.kategori,market:e.market,stok:e.stok,kod:e.kod,notlar:e.notlar}))),z(!1)},K=(e,t)=>{S({tip:e,metin:t}),setTimeout(()=>S(null),3500)},O=async()=>{if(!y.urunAdi.trim()){K("hata","\xdcr\xfcn adı boş olamaz.");return}let e={urun_adi:y.urunAdi,marka:y.marka,fiyat:y.fiyat,olcu:y.olcu,kategori:y.kategori,market:y.market,stok:y.stok,kod:y.kod,notlar:y.notlar};if(k){let{error:t}=await s.O.from("urunler").update(e).eq("id",k);if(t){K("hata","Hata: "+t.message);return}K("basari","\xdcr\xfcn g\xfcncellendi.")}else{let{error:t}=await s.O.from("urunler").insert(e);if(t){K("hata","Hata: "+t.message);return}K("basari","\xdcr\xfcn eklendi.")}b(d),v(null),N(!1),T()},L=e=>{if("ogretmen"===I)return;let{id:t,...a}=e;b(a),v(t),N(!0)},E=async e=>{confirm("Bu \xfcr\xfcn\xfc silmek istediğinizden emin misiniz?")&&(await s.O.from("urunler").delete().eq("id",e),K("basari","\xdcr\xfcn silindi."),T())},M=async()=>{confirm("T\xfcm \xfcr\xfcnleri silmek istediğinizden emin misiniz?")&&(await s.O.from("urunler").delete().neq("id",""),K("basari","T\xfcm \xfcr\xfcnler silindi."),T())},R=["T\xfcm\xfc",...Array.from(new Set(u.map(e=>e.kategori).filter(Boolean))).sort()],Y=["T\xfcm\xfc",...Array.from(new Set(u.map(e=>e.marka).filter(Boolean))).sort()],H=u.filter(e=>{let t=!c||e.urunAdi.toLowerCase().includes(c.toLowerCase())||e.marka.toLowerCase().includes(c.toLowerCase())||e.kod.toLowerCase().includes(c.toLowerCase()),a="T\xfcm\xfc"===g||e.kategori===g,r="T\xfcm\xfc"===p||e.marka===p;return t&&a&&r});return(0,r.jsxs)(l.Z,{children:[w&&(0,r.jsx)("div",{className:"fixed top-5 right-5 z-50 px-5 py-3 rounded-xl shadow-lg text-white text-sm font-medium transition-all ".concat("basari"===w.tip?"bg-emerald-500":"bg-red-500"),children:w.metin}),(0,r.jsxs)("div",{className:"p-6 space-y-5",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,r.jsx)("input",{value:c,onChange:e=>x(e.target.value),placeholder:"\xdcr\xfcn adı, marka veya kod ara...",className:"border border-gray-200 rounded-xl px-4 py-2.5 text-sm text-black p-2 flex-1 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("select",{value:g,onChange:e=>h(e.target.value),className:"border border-gray-200 rounded-xl px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:R.map(e=>(0,r.jsx)("option",{children:e},e))}),(0,r.jsx)("select",{value:p,onChange:e=>f(e.target.value),className:"border border-gray-200 rounded-xl px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:Y.map(e=>(0,r.jsx)("option",{children:e},e))})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[H.length," / ",u.length," \xfcr\xfcn"]}),(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,r.jsx)("button",{onClick:()=>{b(d),v(null),N(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium px-4 py-2.5 rounded-xl transition",children:"+ Yeni \xdcr\xfcn"}),(0,r.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-200 hover:bg-gray-50 text-sm font-medium px-4 py-2.5 rounded-xl transition text-gray-700",children:["Excel'den Y\xfckle",(0,r.jsx)("input",{ref:_,type:"file",accept:".xlsx,.xls",className:"hidden",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;let n=new FileReader;n.onload=async e=>{try{var t;let r=await Promise.all([a.e(382),a.e(181)]).then(a.bind(a,4723)),n=r.read(null===(t=e.target)||void 0===t?void 0:t.result,{type:"binary"}),l=n.Sheets[n.SheetNames[0]],i=r.utils.sheet_to_json(l).filter(e=>e["\xdcr\xfcn Adı"]).map(e=>{var t,a,r,n,l,i,s,o,d;return{urun_adi:String(null!==(t=e["\xdcr\xfcn Adı"])&&void 0!==t?t:""),marka:String(null!==(a=e.Marka)&&void 0!==a?a:""),fiyat:Number(null!==(r=e.Fiyat)&&void 0!==r?r:0),olcu:String(null!==(n=e["\xd6l\xe7\xfc"])&&void 0!==n?n:"Kg"),kategori:String(null!==(l=e.Kategori)&&void 0!==l?l:""),market:String(null!==(i=e.Market)&&void 0!==i?i:""),stok:Number(null!==(s=e.Stok)&&void 0!==s?s:0),kod:String(null!==(o=e.Kod)&&void 0!==o?o:""),notlar:String(null!==(d=e.Notlar)&&void 0!==d?d:"")}}),{error:o}=await s.O.from("urunler").insert(i);if(o){K("hata","Hata: "+o.message);return}K("basari","".concat(i.length," \xfcr\xfcn eklendi.")),T()}catch(e){K("hata","Excel dosyası okunamadı.")}},n.readAsBinaryString(r),_.current&&(_.current.value="")}})]}),u.length>0&&"ogretmen"!==I&&(0,r.jsx)("button",{onClick:M,className:"bg-white border border-red-200 hover:bg-red-50 text-red-500 text-sm font-medium px-4 py-2.5 rounded-xl transition",children:"T\xfcm\xfcn\xfc Sil"})]})]}),t?(0,r.jsx)("div",{className:"text-center py-16 text-gray-400 text-sm",children:"Y\xfckleniyor..."}):0===H.length?(0,r.jsx)("div",{className:"text-center py-16 text-gray-400 text-sm",children:0===u.length?"Hen\xfcz \xfcr\xfcn yok.":"Bu filtreye uygun \xfcr\xfcn bulunamadı."}):(0,r.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-gray-100 shadow-sm",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-gray-50 text-gray-500 text-xs uppercase",children:(0,r.jsx)("tr",{children:["\xdcr\xfcn Adı","Marka","Fiyat","\xd6l\xe7\xfc","Kategori","Market","Stok","Kod",""].map(e=>(0,r.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:e},e))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-50",children:H.map(e=>(0,r.jsxs)("tr",{onClick:()=>L(e),className:"hover:bg-blue-50/40 transition cursor-pointer",children:[(0,r.jsx)("td",{className:"px-4 py-3 font-medium text-gray-800",children:e.urunAdi}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.marka||"—"}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e.fiyat>0?"₺".concat(e.fiyat.toLocaleString("tr-TR",{minimumFractionDigits:2})):"—"}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.olcu}),(0,r.jsx)("td",{className:"px-4 py-3",children:e.kategori?(0,r.jsx)("span",{className:"bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full text-xs font-medium",children:e.kategori}):"—"}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.market||"—"}),(0,r.jsx)("td",{className:"px-4 py-3 font-medium ".concat(e.stok>0?"text-emerald-600":"text-gray-400"),children:e.stok}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-400 font-mono text-xs",children:e.kod||"—"}),(0,r.jsx)("td",{className:"px-4 py-3",onClick:e=>e.stopPropagation(),children:"ogretmen"!==I&&(0,r.jsx)("button",{onClick:()=>E(e.id),className:"text-xs text-red-500 hover:text-red-700 font-medium hover:underline transition",children:"Sil"})})]},e.id))})]})})]}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/30 z-40 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 pt-6 pb-4 border-b border-gray-100",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-800",children:k?"\xdcr\xfcn D\xfczenle":"Yeni \xdcr\xfcn"}),(0,r.jsx)("button",{onClick:()=>{N(!1),v(null),b(d)},className:"text-gray-400 hover:text-gray-600 text-lg leading-none",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"px-6 py-4 space-y-3",children:[[{label:"\xdcr\xfcn Adı *",key:"urunAdi",type:"text"},{label:"Marka",key:"marka",type:"text"},{label:"Fiyat (₺)",key:"fiyat",type:"number"},{label:"Market",key:"market",type:"text"},{label:"Stok",key:"stok",type:"number"},{label:"Kod",key:"kod",type:"text"},{label:"Notlar",key:"notlar",type:"text"}].map(e=>{let{label:t,key:a,type:n}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-500",children:t}),(0,r.jsx)("input",{type:n,value:y[a],onChange:e=>b(t=>({...t,[a]:"number"===n?Number(e.target.value):e.target.value})),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",min:"number"===n?0:void 0})]},a)}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Kategori"}),(0,r.jsxs)("select",{value:y.kategori,onChange:e=>b(t=>({...t,kategori:e.target.value})),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"— Se\xe7iniz —"}),Array.from(new Set(u.map(e=>e.kategori).filter(Boolean))).sort().map(e=>(0,r.jsx)("option",{value:e,children:e},e)),y.kategori&&!u.some(e=>e.kategori===y.kategori)&&(0,r.jsx)("option",{value:y.kategori,children:y.kategori})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"\xd6l\xe7\xfc"}),(0,r.jsx)("select",{value:y.olcu,onChange:e=>b(t=>({...t,olcu:e.target.value})),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.map(e=>(0,r.jsx)("option",{children:e},e))})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 px-6 pb-6 pt-2",children:[(0,r.jsx)("button",{onClick:O,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2.5 rounded-xl transition",children:k?"G\xfcncelle":"Ekle"}),(0,r.jsx)("button",{onClick:()=>{b(d),v(null)},className:"px-4 text-sm text-gray-500 hover:text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-50 transition",children:"Temizle"})]})]})}),(0,r.jsxs)("div",{className:"text-center text-xs text-gray-300 py-4",children:["\xdcr\xfcn Havuzu: ",u.length," | G\xf6r\xfcnt\xfclenen: ",H.length]})]})}},4786:function(e,t,a){"use strict";a.d(t,{O:function(){return r}});let r=(0,a(5674).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")}},function(e){e.O(0,[135,233,115,205,744],function(){return e(e.s=989)}),_N_E=e.O()}]);