(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{2066:function(e,t,a){Promise.resolve().then(a.bind(a,2328))},5561:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(7821),s=a(4233),l=a(168),n=a(8078),i=a(4786);let d={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function o(e){var t;let{children:a,title:o,subtitle:c}=e,m=(0,l.usePathname)(),x=(0,l.useRouter)(),[u,p]=(0,n.useState)(null),[h,b]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("aktifKullaniciId");if(!e){x.push("/");return}let{data:t,error:a}=await i.O.from("kullanicilar").select("id, username, ad_soyad, role").eq("id",e).single();if(a||!t){x.push("/");return}p(t)})()},[x]),!u)return null;let g=null!==(t=d[u.role])&&void 0!==t?t:[],f=(u.ad_soyad||u.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,r.jsx)("button",{onClick:()=>b(!h),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),h&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>b(!1)}),(0,r.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ".concat(h?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),(0,r.jsx)("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),(0,r.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:g.map(e=>{let t=m===e.path;return(0,r.jsx)(s.default,{href:e.path,className:"flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ".concat(t?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"),children:e.name},e.path)})}),(0,r.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("span",{className:"text-white text-xs font-bold",children:f})}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",children:u.ad_soyad||u.username}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:u.role})]})]}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),x.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[o&&(0,r.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[c&&(0,r.jsx)("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:c}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:o})]}),(0,r.jsx)("div",{className:"flex-1 p-8",children:a})]})]})}},7951:function(e,t,a){"use strict";a.d(t,{a:function(){return n}});var r=a(8078),s=a(168);let l={"/admin":["admin"],"/kullanicilar":["admin"],"/dersler":["admin","bolum_baskani"],"/siparisler":["admin"],"/siparis-yonetimi":["admin"],"/urun-havuzu":["admin","ogretmen"],"/receteler":["admin","ogretmen"],"/bolum-baskani":["admin","bolum_baskani"],"/ogretmen":["admin","ogretmen"],"/alisveris-listelerim":["admin","ogretmen"],"/siparislerim":["admin","ogretmen"],"/talep":["admin","ogretmen"],"/satin":["admin","satin_alma"],"/stok":["admin","stok"]};function n(e){let t=(0,s.useRouter)(),[a,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let a=localStorage.getItem("aktifKullaniciId"),r=localStorage.getItem("role");if(!a||!r){t.replace("/");return}let s=l[e];if(!s){n(!0),d(!1);return}s.includes(r)?(n(!0),d(!1)):t.replace({admin:"/admin",ogretmen:"/ogretmen",satin_alma:"/satin",stok:"/stok",bolum_baskani:"/bolum-baskani"}[r]||"/")},[e,t]),{yetkili:a,yukleniyor:i}}},2328:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(7821),s=a(8078),l=a(5561),n=a(7951),i=a(4786);function d(){let{yetkili:e,yukleniyor:t}=(0,n.a)("/stok");if(t)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[a,d]=(0,s.useState)([]),[o,c]=(0,s.useState)({}),[m,x]=(0,s.useState)({}),[u,p]=(0,s.useState)(""),[h,b]=(0,s.useState)({}),[g,f]=(0,s.useState)(null),[y,j]=(0,s.useState)(!0);(0,s.useEffect)(()=>{N()},[]);let N=async()=>{j(!0);let{data:e}=await i.O.from("urunler").select("id, urun_adi, marka, olcu, stok").order("urun_adi"),t=(e||[]).map(e=>{var t;return{id:e.id,urunAdi:e.urun_adi,marka:e.marka,olcu:e.olcu,stok:null!==(t=e.stok)&&void 0!==t?t:0}});d(t);let a={};t.forEach(e=>{a[e.id]=e.stok}),c(a),j(!1)},k=(e,t)=>{f({tip:e,metin:t}),setTimeout(()=>f(null),2500)},v=e=>{let t=e.toLowerCase();return"kg"===t||"l"===t?{serbest:!0,baslangic:0,adim:0}:"g"===t||"ml"===t?{serbest:!1,baslangic:50,adim:50}:{serbest:!1,baslangic:1,adim:1}},w=(e,t)=>{x(a=>({...a,[e]:t}));let a=parseFloat(t.replace(",","."));c(t=>({...t,[e]:!isNaN(a)&&a>=0?Math.round(1e3*a)/1e3:0}))},S=e=>{var t,a;let{adim:r,baslangic:s}=v(e.olcu),l=null!==(a=null!==(t=o[e.id])&&void 0!==t?t:e.stok)&&void 0!==a?a:s;c(t=>({...t,[e.id]:Math.round((l+r)*1e3)/1e3}))},I=e=>{var t,a;let{adim:r,baslangic:s}=v(e.olcu),l=Math.max(0,Math.round(((null!==(a=null!==(t=o[e.id])&&void 0!==t?t:e.stok)&&void 0!==a?a:s)-r)*1e3)/1e3);c(t=>({...t,[e.id]:l}))},C=(e,t)=>{let a=Math.max(0,Math.round(1e3*t)/1e3);c(t=>({...t,[e]:a}))},z=(0,s.useCallback)(async e=>{var t;let a=null!==(t=o[e.id])&&void 0!==t?t:e.stok;if(a===e.stok)return;b(t=>({...t,[e.id]:!0}));let{error:r}=await i.O.from("urunler").update({stok:a}).eq("id",e.id);if(b(t=>({...t,[e.id]:!1})),r){k("hata","Hata: "+r.message);return}d(t=>t.map(t=>t.id===e.id?{...t,stok:a}:t)),x(t=>{let a={...t};return delete a[e.id],a}),k("basari",'"'.concat(e.urunAdi,'" g\xfcncellendi → ').concat(a," ").concat(e.olcu))},[o]),_=a.filter(e=>!u||e.urunAdi.toLowerCase().includes(u.toLowerCase())||(e.marka||"").toLowerCase().includes(u.toLowerCase())),M=a.filter(e=>e.stok>0).length;return(0,r.jsx)(l.Z,{title:"Stok Paneli",subtitle:"Depodaki mevcut \xfcr\xfcn miktarlarını girin",children:(0,r.jsxs)("div",{className:"max-w-5xl space-y-5",children:[g&&(0,r.jsx)("div",{className:"text-sm rounded-xl px-4 py-3 border font-medium transition ".concat("basari"===g.tip?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-red-50 text-red-600 border-red-200"),children:g.metin}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[{label:"Toplam \xdcr\xfcn",deger:a.length,renk:"text-gray-800"},{label:"Stokta Var",deger:M,renk:"text-emerald-600"},{label:"Stok Yok",deger:a.length-M,renk:"text-red-600"}].map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider mb-1",children:e.label}),(0,r.jsx)("p",{className:"text-3xl font-bold ".concat(e.renk),children:e.deger})]},e.label))}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-100 rounded-xl px-4 py-3",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-blue-700 mb-2",children:"Miktar Giriş Rehberi"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-x-8 gap-y-1.5 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-mono bg-white border border-blue-200 px-1.5 py-0.5 rounded text-blue-800 whitespace-nowrap",children:"Kg / L"}),(0,r.jsxs)("span",{className:"text-gray-500",children:["İstediğiniz değeri elle girin — orn: ",(0,r.jsx)("b",{children:"0,100"})," \xb7 ",(0,r.jsx)("b",{children:"1,500"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-mono bg-white border border-blue-200 px-1.5 py-0.5 rounded text-blue-800 whitespace-nowrap",children:"G / Ml"}),(0,r.jsxs)("span",{className:"text-gray-500",children:["+ / - ile ",(0,r.jsx)("b",{children:"50'şer"})," artır/azalt"]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-mono bg-white border border-blue-200 px-1.5 py-0.5 rounded text-blue-800 whitespace-nowrap",children:"Adet"}),(0,r.jsxs)("span",{className:"text-gray-500",children:["+ / - ile ",(0,r.jsx)("b",{children:"1'er"})," artır/azalt"]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-mono bg-white border border-blue-200 px-1.5 py-0.5 rounded text-blue-800 whitespace-nowrap",children:"Paket / Kutu"}),(0,r.jsxs)("span",{className:"text-gray-500",children:["+ / - ile ",(0,r.jsx)("b",{children:"1'er"})," artır/azalt"]})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-4",children:(0,r.jsx)("input",{value:u,onChange:e=>p(e.target.value),placeholder:"\xdcr\xfcn adı veya marka ara...",className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none text-black p-2 focus:ring-2 focus:ring-red-500"})}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-800",children:"Depo Stok Miktarları"}),(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:[_.length," \xfcr\xfcn \xb7 Giriş yaptıktan sonra Enter/Tab ile kaydedin"]})]}),t?(0,r.jsx)("div",{className:"py-20 text-center text-gray-400 text-sm",children:"Y\xfckleniyor..."}):0===_.length?(0,r.jsx)("div",{className:"py-20 text-center text-gray-400 text-sm",children:"\xdcr\xfcn bulunamadı."}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100 text-left",children:[(0,r.jsx)("th",{className:"px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"\xdcR\xdcN"}),(0,r.jsx)("th",{className:"px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"MARKA"}),(0,r.jsx)("th",{className:"px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"\xd6L\xc7\xdc"}),(0,r.jsx)("th",{className:"px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider w-52",children:"DEPODA MEVCUT"}),(0,r.jsx)("th",{className:"px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider w-24",children:"DURUM"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-50",children:_.map(e=>{var t;let a=null!==(t=o[e.id])&&void 0!==t?t:e.stok,s=a!==e.stok,l=v(e.olcu);return(0,r.jsxs)("tr",{className:"transition-colors ".concat(s?"bg-amber-50":"hover:bg-gray-50"),children:[(0,r.jsx)("td",{className:"px-5 py-3 font-medium text-gray-800",children:e.urunAdi}),(0,r.jsx)("td",{className:"px-5 py-3 text-gray-500",children:e.marka||"—"}),(0,r.jsx)("td",{className:"px-5 py-3 text-gray-500",children:e.olcu}),(0,r.jsx)("td",{className:"px-5 py-3",children:l.serbest?(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)("input",{type:"text",inputMode:"decimal",value:void 0!==m[e.id]?m[e.id]:a>0?String(a).replace(".",","):"",placeholder:"orn: 1,500",onChange:t=>w(e.id,t.target.value),onFocus:e=>e.target.select(),onBlur:()=>z(e),onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-28 border rounded-lg px-2 py-1.5 text-sm text-center focus:outline-none focus:ring-2 focus:ring-red-500 transition ".concat(s?"border-amber-400 bg-amber-50":a>0?"border-gray-300 bg-white":"border-gray-200 bg-white"," ").concat(a>0?"text-emerald-700 font-semibold":"text-gray-400")}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500",children:e.olcu})]}):(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{type:"button",onClick:()=>I(e),className:"w-7 h-7 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-600 font-bold text-sm transition",children:"-"}),(0,r.jsx)("input",{type:"number",value:a||"",step:l.adim,min:0,onChange:t=>C(e.id,Number(t.target.value)),onFocus:e=>e.target.select(),onBlur:()=>z(e),onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-16 border rounded-lg px-1 py-1.5 text-sm text-center focus:outline-none focus:ring-2 focus:ring-red-500 transition ".concat(s?"border-amber-400 bg-amber-50":"border-gray-200 bg-white"," ").concat(a>0?"text-emerald-700 font-semibold":"text-gray-400")}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:e.olcu}),(0,r.jsx)("button",{type:"button",onClick:()=>S(e),className:"w-7 h-7 flex items-center justify-center bg-red-100 hover:bg-red-200 rounded-lg text-red-700 font-bold text-sm transition",children:"+"})]})}),(0,r.jsxs)("td",{className:"px-5 py-3",children:[h[e.id]&&(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"kaydediliyor..."}),!h[e.id]&&s&&(0,r.jsx)("button",{onClick:()=>z(e),className:"text-xs bg-amber-500 hover:bg-amber-600 text-white font-semibold px-2.5 py-1 rounded-lg transition",children:"Kaydet"}),!h[e.id]&&!s&&a>0&&(0,r.jsx)("span",{className:"text-xs text-emerald-500 font-medium",children:"✓"})]})]},e.id)})})]})]})]})})}},4786:function(e,t,a){"use strict";a.d(t,{O:function(){return r}});let r=(0,a(5674).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")}},function(e){e.O(0,[135,233,115,205,744],function(){return e(e.s=2066)}),_N_E=e.O()}]);