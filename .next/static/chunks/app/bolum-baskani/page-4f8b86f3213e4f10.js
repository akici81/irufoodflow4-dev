(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{1452:function(e,a,t){Promise.resolve().then(t.bind(t,3876))},3876:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var r=t(7821),l=t(8078),s=t(4233),n=t(5561),i=t(7951),d=t(4786);let o=[{value:"ogretmen",label:"\xd6ğretmen"},{value:"bolum-baskani",label:"B\xf6l\xfcm Başkanı"},{value:"stok",label:"Stok Sorumlusu"},{value:"satin",label:"Satın Alma"}],c={ogretmen:"\xd6ğretmen","bolum-baskani":"B\xf6l\xfcm Başkanı",stok:"Stok Sorumlusu",satin:"Satın Alma",admin:"Admin"},m={ogretmen:"bg-blue-100 text-blue-700","bolum-baskani":"bg-purple-100 text-purple-700",stok:"bg-amber-100 text-amber-700",satin:"bg-emerald-100 text-emerald-700"},u={bekliyor:"bg-amber-100 text-amber-700 border-amber-200",onaylandi:"bg-blue-100 text-blue-700 border-blue-200",teslim_alindi:"bg-emerald-100 text-emerald-700 border-emerald-200"},x={bekliyor:"⏳ Bekliyor",onaylandi:" Onaylandı",teslim_alindi:" Teslim Alındı"},h=Array.from({length:10},(e,a)=>"".concat(a+1,". Hafta")),g=["Kg","L","Paket","Adet","G","Ml","Kutu"],p={urunAdi:"",marka:"",fiyat:0,olcu:"Kg",kategori:"",market:"",stok:0,kod:"",notlar:""};function b(){let{yetkili:e,yukleniyor:a}=(0,i.a)("/bolum-baskani");if(a)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[b,y]=(0,l.useState)(""),[f,j]=(0,l.useState)([]),[k,v]=(0,l.useState)([]),[N,w]=(0,l.useState)([]),[S,_]=(0,l.useState)([]),[C,A]=(0,l.useState)([]),[z,I]=(0,l.useState)("panel"),[T,O]=(0,l.useState)(null),[K,E]=(0,l.useState)(""),[B,D]=(0,l.useState)(""),[H,M]=(0,l.useState)(""),[L,R]=(0,l.useState)("ogretmen"),[F,Y]=(0,l.useState)(null),[q,P]=(0,l.useState)("tumu"),[G,J]=(0,l.useState)("tumu"),[Z,U]=(0,l.useState)(null),[X,V]=(0,l.useState)(p),[Q,W]=(0,l.useState)(null),[$,ee]=(0,l.useState)(!1),[ea,et]=(0,l.useState)(""),[er,el]=(0,l.useState)("T\xfcm\xfc"),es=(0,l.useRef)(null),[en,ei]=(0,l.useState)(!1);(0,l.useEffect)(()=>{ed()},[]);let ed=async()=>{let e=localStorage.getItem("aktifKullaniciId"),[{data:a},{data:t},{data:r},{data:l},{data:s}]=await Promise.all([d.O.from("kullanicilar").select("ad_soyad, username").eq("id",e).single(),d.O.from("dersler").select("*").order("kod"),d.O.from("kullanicilar").select("id, username, ad_soyad, role, dersler").neq("role","admin"),d.O.from("siparisler").select("*").order("tarih",{ascending:!1}),d.O.from("urunler").select("*").order("urun_adi")]);y((null==a?void 0:a.ad_soyad)||(null==a?void 0:a.username)||""),j(t||[]),v(r||[]),w((r||[]).filter(e=>"ogretmen"===e.role)),_((l||[]).map(e=>({id:e.id,ogretmenId:e.ogretmen_id,ogretmenAdi:e.ogretmen_adi,dersId:e.ders_id,dersAdi:e.ders_adi,hafta:e.hafta,urunler:e.urunler||[],genelToplam:e.genel_toplam,tarih:e.tarih,durum:e.durum}))),A((s||[]).map(e=>({id:e.id,urunAdi:e.urun_adi,marka:e.marka,fiyat:e.fiyat,olcu:e.olcu,kategori:e.kategori,market:e.market,stok:e.stok,kod:e.kod,notlar:e.notlar})))},eo=(e,a)=>{O({tip:e,metin:a}),setTimeout(()=>O(null),3500)},ec=async()=>{if(!B||!H||!K){eo("hata","T\xfcm alanları doldurun.");return}let{data:e}=await d.O.from("kullanicilar").select("id").eq("username",B).single();if(e){eo("hata","Bu kullanıcı adı zaten kullanılıyor.");return}let{error:a}=await d.O.from("kullanicilar").insert({ad_soyad:K,username:B,password_hash:H,role:L,dersler:[]});if(a){eo("hata","Hata: "+a.message);return}eo("basari",'"'.concat(K,'" eklendi.')),E(""),D(""),M(""),R("ogretmen"),ed()},em=async()=>{if(!F)return;let{error:e}=await d.O.from("kullanicilar").update({ad_soyad:F.ad_soyad,username:F.username,role:F.role,...F.password_hash?{password_hash:F.password_hash}:{}}).eq("id",F.id);if(e){eo("hata","Hata: "+e.message);return}eo("basari","Kullanıcı g\xfcncellendi."),Y(null),ed()},eu=async(e,a)=>{confirm('"'.concat(a,'" kullanıcısını silmek istediğinizden emin misiniz?'))&&(await d.O.from("kullanicilar").delete().eq("id",e),eo("basari","Kullanıcı silindi."),ed())},ex=async(e,a)=>{await d.O.from("siparisler").update({durum:a}).eq("id",e),_(t=>t.map(t=>t.id===e?{...t,durum:a}:t)),(null==Z?void 0:Z.id)===e&&U(e=>e?{...e,durum:a}:null)},eh=async()=>{if(!X.urunAdi.trim()){eo("hata","\xdcr\xfcn adı boş olamaz.");return}let e={urun_adi:X.urunAdi,marka:X.marka,fiyat:X.fiyat,olcu:X.olcu,kategori:X.kategori,market:X.market,stok:X.stok,kod:X.kod,notlar:X.notlar};if(Q){let{error:a}=await d.O.from("urunler").update(e).eq("id",Q);if(a){eo("hata","Hata: "+a.message);return}eo("basari","\xdcr\xfcn g\xfcncellendi.")}else{let{error:a}=await d.O.from("urunler").insert(e);if(a){eo("hata","Hata: "+a.message);return}eo("basari","\xdcr\xfcn eklendi.")}V(p),W(null),ee(!1),ed()},eg=async e=>{confirm("Bu \xfcr\xfcn\xfc silmek istediğinizden emin misiniz?")&&(await d.O.from("urunler").delete().eq("id",e),eo("basari","\xdcr\xfcn silindi."),ed())},ep=async e=>{let a=N.find(a=>a.id===e);if(!a)return;ei(!0);let{data:r}=await d.O.from("siparisler").select("*").eq("ogretmen_id",e),l=await Promise.all([t.e(382),t.e(181)]).then(t.bind(t,4723)),s=l.utils.book_new();for(let e of a.dersler||[]){let t=f.find(a=>a.id===e);if(t)for(let n of h){let i=(r||[]).find(a=>a.ders_id===e&&a.hafta===n),d=(null==i?void 0:i.urunler)||[],o=[["".concat(t.kod," - ").concat(t.ad," MALZEME TALEP LİSTESİ"),"","","","","","",""],[a.ad_soyad||a.username,"","","","","",n,""],["","","","","","","",""],["Sıra no","\xdcr\xfcn","Marka","Miktar","\xd6l\xe7\xfc","B.Fiyat","Toplam","Durum"],...d.map((e,a)=>[a+1,e.urunAdi,e.marka,e.miktar,e.olcu,e.birimFiyat,e.toplam,""])],c=l.utils.aoa_to_sheet(o);c["!cols"]=[{wch:8},{wch:35},{wch:20},{wch:10},{wch:8},{wch:12},{wch:12},{wch:15}],l.utils.book_append_sheet(s,c,"".concat(t.kod,"_").concat(n).slice(0,31))}}if(0===s.SheetNames.length){eo("hata","Bu \xf6ğretmene ait liste bulunamadı."),ei(!1);return}l.writeFile(s,"".concat(a.ad_soyad||a.username,"_Liste.xlsx")),ei(!1)},eb=f.filter(e=>N.some(a=>(a.dersler||[]).includes(e.id))).length,ey=["tumu",...Array.from(new Set(S.map(e=>e.hafta))).sort()],ef=S.filter(e=>("tumu"===q||e.hafta===q)&&("tumu"===G||e.durum===G)),ej=S.filter(e=>"bekliyor"===e.durum).length,ek=["T\xfcm\xfc",...Array.from(new Set(C.map(e=>e.kategori).filter(Boolean))).sort()],ev=C.filter(e=>(!ea||e.urunAdi.toLowerCase().includes(ea.toLowerCase())||(e.marka||"").toLowerCase().includes(ea.toLowerCase()))&&("T\xfcm\xfc"===er||e.kategori===er));return(0,r.jsx)(n.Z,{title:"B\xf6l\xfcm Başkanı Paneli",subtitle:"T\xfcm y\xf6netim ara\xe7ları",children:(0,r.jsxs)("div",{className:"max-w-6xl space-y-5",children:[T&&(0,r.jsx)("div",{className:"text-sm rounded-xl px-4 py-3 border font-medium ".concat("basari"===T.tip?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-red-50 text-red-600 border-red-200"),children:T.metin}),(0,r.jsxs)("div",{className:"bg-red-700 text-white rounded-2xl px-8 py-6",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold mb-1",children:["Merhaba, ",b,"!"]}),(0,r.jsx)("p",{className:"text-red-200 text-sm",children:"B\xf6l\xfcm Başkanı Paneline Hoş Geldiniz."})]}),(0,r.jsx)("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-2xl",children:[{key:"panel",label:" Panel"},{key:"kullanici",label:" Kullanıcılar"},{key:"listeler",label:" Listeler"},{key:"siparisler",label:" Siparişler",badge:ej},{key:"urunler",label:" \xdcr\xfcn Havuzu"}].map(e=>(0,r.jsxs)("button",{onClick:()=>I(e.key),className:"flex-1 px-3 py-2.5 text-sm font-medium rounded-xl transition flex items-center justify-center gap-2 ".concat(z===e.key?"bg-white text-red-700 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[e.label,e.badge?(0,r.jsx)("span",{className:"bg-red-600 text-white text-xs font-bold px-1.5 py-0.5 rounded-full",children:e.badge}):null]},e.key))}),"panel"===z&&(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Toplam Ders",deger:f.length,emoji:"",renk:"text-red-700"},{label:"\xd6ğretmen Sayısı",deger:N.length,emoji:"‍",renk:"text-blue-600"},{label:"Atanmış Ders",deger:eb,emoji:"",renk:"text-emerald-600"},{label:"Bekleyen Sipariş",deger:ej,emoji:"⏳",renk:"text-amber-600"}].map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider mb-2",children:e.label}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-3xl",children:e.emoji}),(0,r.jsx)("span",{className:"text-3xl font-bold ".concat(e.renk),children:e.deger})]})]},e.label))}),(0,r.jsx)(s.default,{href:"/dersler",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl border-2 border-red-200 shadow-sm p-6 hover:shadow-md transition cursor-pointer flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("span",{className:"text-2xl"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-lg text-red-700",children:"Ders Y\xf6netimi"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"Dersleri ekleyin, silin ve \xf6ğretmenlere atayın"})]}),(0,r.jsx)("span",{className:"ml-auto text-sm font-semibold text-red-700",children:"Git →"})]})})]}),"kullanici"===z&&(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6 space-y-4",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-800",children:"Yeni Kullanıcı Ekle"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[[{label:"Ad Soyad",val:K,set:E,ph:"Ad Soyad"},{label:"Kullanıcı Adı",val:B,set:D,ph:"kullanici_adi"},{label:"Şifre",val:H,set:M,ph:"Şifre"}].map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:e.label}),(0,r.jsx)("input",{value:e.val,onChange:a=>e.set(a.target.value),placeholder:e.ph,className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm text-black p-2 focus:outline-none focus:ring-2 focus:ring-red-500"})]},e.label)),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Rol"}),(0,r.jsx)("select",{value:L,onChange:e=>R(e.target.value),className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:o.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsx)("button",{onClick:ec,className:"w-full bg-red-700 hover:bg-red-800 text-white font-semibold py-3 rounded-xl transition text-sm",children:"+ Kullanıcı Ekle"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,r.jsx)("h2",{className:"font-semibold text-gray-800",children:"Mevcut Kullanıcılar"})}),(0,r.jsx)("div",{className:"divide-y divide-gray-50",children:k.map(e=>(0,r.jsx)("div",{className:"px-6 py-4",children:(null==F?void 0:F.id)===e.id?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)("input",{value:F.ad_soyad,onChange:e=>Y({...F,ad_soyad:e.target.value}),placeholder:"Ad Soyad",className:"border border-gray-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-500"}),(0,r.jsx)("input",{value:F.username,onChange:e=>Y({...F,username:e.target.value}),placeholder:"Kullanıcı adı",className:"border border-gray-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-500"}),(0,r.jsx)("input",{type:"password",placeholder:"Yeni şifre (boş bırakılabilir)",onChange:e=>Y({...F,password_hash:e.target.value}),className:"border border-gray-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-500"}),(0,r.jsx)("select",{value:F.role,onChange:e=>Y({...F,role:e.target.value}),className:"border border-gray-200 rounded-xl px-3 py-2 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:o.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:em,className:"text-xs bg-emerald-600 hover:bg-emerald-700 text-white font-medium px-4 py-2 rounded-lg transition",children:"Kaydet"}),(0,r.jsx)("button",{onClick:()=>Y(null),className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 font-medium px-4 py-2 rounded-lg transition",children:"İptal"})]})]}):(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:e.ad_soyad||e.username}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["@",e.username]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full ".concat(m[e.role]||"bg-gray-100 text-gray-600"),children:c[e.role]||e.role}),(0,r.jsx)("button",{onClick:()=>Y(e),className:"text-xs text-blue-600 hover:underline font-medium",children:"D\xfczenle"}),(0,r.jsx)("button",{onClick:()=>eu(e.id,e.ad_soyad||e.username),className:"text-xs text-red-500 hover:underline font-medium",children:"Sil"})]})]})},e.id))})]})]}),"listeler"===z&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-800",children:"\xd6ğretmen Bazlı Liste İndir"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Se\xe7ilen \xf6ğretmenin t\xfcm ders ve hafta listelerini Excel olarak indir"})]}),0===N.length?(0,r.jsx)("div",{className:"py-20 text-center text-gray-400 text-sm",children:"Hen\xfcz \xf6ğretmen bulunmuyor."}):N.map(e=>{let a=(e.dersler||[]).length;return(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between border-b border-gray-50 last:border-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:e.ad_soyad||e.username}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-0.5",children:a>0?"".concat(a," ders \xb7 ")+(e.dersler||[]).map(e=>{var a;return null===(a=f.find(a=>a.id===e))||void 0===a?void 0:a.kod}).filter(Boolean).join(", "):"Ders atanmamış"})]}),(0,r.jsx)("button",{onClick:()=>ep(e.id),disabled:en||0===a,className:"text-sm bg-emerald-600 hover:bg-emerald-700 disabled:opacity-40 text-white font-medium px-4 py-2 rounded-xl transition",children:"Excel İndir"})]},e.id)})]}),"siparisler"===z&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-4 flex flex-wrap gap-3 items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Hafta"}),(0,r.jsx)("select",{value:q,onChange:e=>P(e.target.value),className:"border border-gray-200 rounded-xl px-4 py-2 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:ey.map(e=>(0,r.jsx)("option",{value:e,children:"tumu"===e?"T\xfcm Haftalar":e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Durum"}),(0,r.jsxs)("select",{value:G,onChange:e=>J(e.target.value),className:"border border-gray-200 rounded-xl px-4 py-2 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,r.jsx)("option",{value:"tumu",children:"T\xfcm Durumlar"}),(0,r.jsx)("option",{value:"bekliyor",children:"⏳ Bekliyor"}),(0,r.jsx)("option",{value:"onaylandi",children:"Onaylandı"}),(0,r.jsx)("option",{value:"teslim_alindi",children:"Teslim Alındı"})]})]}),(0,r.jsxs)("div",{className:"ml-auto text-xs text-gray-400",children:[ef.length," sipariş"]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{className:"flex-1 bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:0===ef.length?(0,r.jsx)("div",{className:"py-20 text-center text-gray-400 text-sm",children:"Sipariş bulunamadı."}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-gray-50 border-b border-gray-100 text-left",children:["\xd6ĞRETMEN","DERS","HAFTA","DURUM","İŞLEM"].map(e=>(0,r.jsx)("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-50",children:ef.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer ".concat((null==Z?void 0:Z.id)===e.id?"bg-blue-50":""),onClick:()=>U((null==Z?void 0:Z.id)===e.id?null:e),children:[(0,r.jsx)("td",{className:"px-4 py-3 font-medium text-gray-800",children:e.ogretmenAdi}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-500 text-xs",children:e.dersAdi}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.hafta}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full border ".concat(u[e.durum]),children:x[e.durum]})}),(0,r.jsx)("td",{className:"px-4 py-3",onClick:e=>e.stopPropagation(),children:(0,r.jsxs)("div",{className:"flex gap-1",children:["bekliyor"===e.durum&&(0,r.jsx)("button",{onClick:()=>ex(e.id,"onaylandi"),className:"text-xs bg-blue-600 hover:bg-blue-700 text-white font-medium px-2.5 py-1.5 rounded-lg transition",children:"Onayla"}),"onaylandi"===e.durum&&(0,r.jsx)("button",{onClick:()=>ex(e.id,"teslim_alindi"),className:"text-xs bg-emerald-600 hover:bg-emerald-700 text-white font-medium px-2.5 py-1.5 rounded-lg transition",children:"Teslim"}),"bekliyor"!==e.durum&&(0,r.jsx)("button",{onClick:()=>ex(e.id,"bekliyor"),className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 font-medium px-2.5 py-1.5 rounded-lg transition",children:"Geri Al"})]})})]},e.id))})]})}),Z&&(0,r.jsxs)("div",{className:"w-72 bg-white rounded-2xl border border-gray-200 shadow-sm p-5 space-y-3 self-start sticky top-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 text-sm",children:"Sipariş Detayı"}),(0,r.jsx)("button",{onClick:()=>U(null),className:"text-gray-400 hover:text-gray-600 text-xl leading-none",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"space-y-1 text-xs text-gray-500",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"\xd6ğretmen:"})," ",Z.ogretmenAdi]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Ders:"})," ",Z.dersAdi]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Hafta:"})," ",Z.hafta]}),(0,r.jsx)("span",{className:"inline-block text-xs font-medium px-2 py-0.5 rounded-full border ".concat(u[Z.durum]),children:x[Z.durum]})]}),(0,r.jsx)("div",{className:"divide-y divide-gray-50",children:Z.urunler.map((e,a)=>(0,r.jsxs)("div",{className:"py-2",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-800",children:e.urunAdi}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[e.miktar," ",e.olcu," \xb7 ",e.toplam>0?"₺".concat(e.toplam.toFixed(2)):"—"]})]},a))}),(0,r.jsx)("div",{className:"border-t border-gray-100 pt-2",children:(0,r.jsxs)("p",{className:"text-xs font-bold text-gray-800",children:["Toplam: ",Z.genelToplam>0?"₺".concat(Z.genelToplam.toLocaleString("tr-TR",{minimumFractionDigits:2})):"—"]})})]})]})]}),"urunler"===z&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-4 flex flex-wrap gap-3 items-center",children:[(0,r.jsx)("input",{value:ea,onChange:e=>et(e.target.value),placeholder:"\xdcr\xfcn adı veya marka ara...",className:"border border-gray-200 rounded-xl px-4 py-2.5 text-sm flex-1 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-red-500"}),(0,r.jsx)("select",{value:er,onChange:e=>el(e.target.value),className:"border border-gray-200 rounded-xl px-3 py-2.5 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:ek.map(e=>(0,r.jsx)("option",{children:e},e))}),(0,r.jsxs)("span",{className:"text-xs text-gray-400 bg-gray-100 rounded-full px-3 py-1.5 font-medium",children:[ev.length," / ",C.length," \xfcr\xfcn"]}),(0,r.jsx)("button",{onClick:()=>{V(p),W(null),ee(!0)},className:"bg-red-700 hover:bg-red-800 text-white text-sm font-medium px-4 py-2.5 rounded-xl transition",children:"+ Yeni \xdcr\xfcn"}),(0,r.jsxs)("label",{className:"bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium px-4 py-2.5 rounded-xl transition cursor-pointer",children:["Excel'den Y\xfckle ",(0,r.jsx)("input",{ref:es,type:"file",accept:".xlsx,.xls",onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return;let l=new FileReader;l.onload=async e=>{try{var a;let r=await Promise.all([t.e(382),t.e(181)]).then(t.bind(t,4723)),l=r.read(null===(a=e.target)||void 0===a?void 0:a.result,{type:"binary"}),s=l.Sheets[l.SheetNames[0]],n=r.utils.sheet_to_json(s).filter(e=>e["\xdcr\xfcn Adı"]).map(e=>{var a,t,r,l,s,n,i,d,o;return{urun_adi:String(null!==(a=e["\xdcr\xfcn Adı"])&&void 0!==a?a:""),marka:String(null!==(t=e.Marka)&&void 0!==t?t:""),fiyat:Number(null!==(r=e.Fiyat)&&void 0!==r?r:0),olcu:String(null!==(l=e["\xd6l\xe7\xfc"])&&void 0!==l?l:"Kg"),kategori:String(null!==(s=e.Kategori)&&void 0!==s?s:""),market:String(null!==(n=e.Market)&&void 0!==n?n:""),stok:Number(null!==(i=e.Stok)&&void 0!==i?i:0),kod:String(null!==(d=e.Kod)&&void 0!==d?d:""),notlar:String(null!==(o=e.Notlar)&&void 0!==o?o:"")}}),{error:i}=await d.O.from("urunler").insert(n);if(i){eo("hata","Hata: "+i.message);return}eo("basari","".concat(n.length," \xfcr\xfcn eklendi.")),ed()}catch(e){eo("hata","Excel dosyası okunamadı.")}},l.readAsBinaryString(r),es.current&&(es.current.value="")},className:"hidden"})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{className:"flex-1 bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:0===ev.length?(0,r.jsx)("div",{className:"py-20 text-center text-gray-400 text-sm",children:0===C.length?"Hen\xfcz \xfcr\xfcn yok.":"\xdcr\xfcn bulunamadı."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-gray-50 border-b border-gray-100 text-left",children:["\xdcr\xfcn Adı","Marka","Fiyat","\xd6l\xe7\xfc","Kategori","Stok",""].map(e=>(0,r.jsx)("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap",children:e},e))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-50",children:ev.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{let{id:a,...t}=e;V(t),W(a),ee(!0)},children:[(0,r.jsx)("td",{className:"px-4 py-3 font-medium text-gray-800",children:e.urunAdi}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.marka||"—"}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-700 whitespace-nowrap",children:e.fiyat>0?"₺".concat(e.fiyat.toLocaleString("tr-TR",{minimumFractionDigits:2})):"—"}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.olcu}),(0,r.jsx)("td",{className:"px-4 py-3",children:e.kategori?(0,r.jsx)("span",{className:"bg-red-50 text-red-700 text-xs px-2 py-0.5 rounded-full border border-red-100",children:e.kategori}):"—"}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:"text-xs font-medium ".concat(e.stok>0?"text-emerald-600":"text-gray-400"),children:e.stok})}),(0,r.jsx)("td",{className:"px-4 py-3 text-right",onClick:e=>e.stopPropagation(),children:(0,r.jsx)("button",{onClick:()=>eg(e.id),className:"text-xs text-red-500 hover:text-red-700 font-medium hover:underline transition",children:"Sil"})})]},e.id))})]})})}),$&&(0,r.jsxs)("div",{className:"w-72 bg-white rounded-2xl border border-gray-200 shadow-sm p-5 space-y-3 self-start sticky top-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 text-sm",children:Q?"\xdcr\xfcn D\xfczenle":"Yeni \xdcr\xfcn"}),(0,r.jsx)("button",{onClick:()=>{ee(!1),W(null),V(p)},className:"text-gray-400 hover:text-gray-600 text-xl leading-none",children:"\xd7"})]}),[{label:"\xdcr\xfcn Adı *",key:"urunAdi",type:"text"},{label:"Marka",key:"marka",type:"text"},{label:"Fiyat (₺)",key:"fiyat",type:"number"},{label:"Kategori",key:"kategori",type:"text"},{label:"Market",key:"market",type:"text"},{label:"Stok",key:"stok",type:"number"},{label:"Kod",key:"kod",type:"text"},{label:"Notlar",key:"notlar",type:"text"}].map(e=>{let{label:a,key:t,type:l}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:a}),(0,r.jsx)("input",{type:l,value:X[t],onChange:e=>V(a=>({...a,[t]:"number"===l?Number(e.target.value):e.target.value})),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-500",min:"number"===l?0:void 0})]},t)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"\xd6l\xe7\xfc"}),(0,r.jsx)("select",{value:X.olcu,onChange:e=>V(a=>({...a,olcu:e.target.value})),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:g.map(e=>(0,r.jsx)("option",{children:e},e))})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-1",children:[(0,r.jsx)("button",{onClick:eh,className:"flex-1 bg-red-700 hover:bg-red-800 text-white text-sm font-medium py-2.5 rounded-xl transition",children:Q?"G\xfcncelle":"Ekle"}),(0,r.jsx)("button",{onClick:()=>{V(p),W(null)},className:"px-4 text-sm text-gray-500 hover:text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-50 transition",children:"Temizle"})]})]})]})]})]})})}},5561:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var r=t(7821),l=t(4233),s=t(168),n=t(8078),i=t(4786);let d={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function o(e){var a;let{children:t,title:o,subtitle:c}=e,m=(0,s.usePathname)(),u=(0,s.useRouter)(),[x,h]=(0,n.useState)(null),[g,p]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("aktifKullaniciId");if(!e){u.push("/");return}let{data:a,error:t}=await i.O.from("kullanicilar").select("id, username, ad_soyad, role").eq("id",e).single();if(t||!a){u.push("/");return}h(a)})()},[u]),!x)return null;let b=null!==(a=d[x.role])&&void 0!==a?a:[],y=(x.ad_soyad||x.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,r.jsx)("button",{onClick:()=>p(!g),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),g&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>p(!1)}),(0,r.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ".concat(g?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),(0,r.jsx)("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),(0,r.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:b.map(e=>{let a=m===e.path;return(0,r.jsx)(l.default,{href:e.path,className:"flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ".concat(a?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"),children:e.name},e.path)})}),(0,r.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("span",{className:"text-white text-xs font-bold",children:y})}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",children:x.ad_soyad||x.username}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:x.role})]})]}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),u.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[o&&(0,r.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[c&&(0,r.jsx)("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:c}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:o})]}),(0,r.jsx)("div",{className:"flex-1 p-8",children:t})]})]})}},7951:function(e,a,t){"use strict";t.d(a,{a:function(){return n}});var r=t(8078),l=t(168);let s={"/admin":["admin"],"/kullanicilar":["admin"],"/dersler":["admin","bolum_baskani"],"/siparisler":["admin"],"/siparis-yonetimi":["admin"],"/urun-havuzu":["admin","ogretmen"],"/receteler":["admin","ogretmen"],"/bolum-baskani":["admin","bolum_baskani"],"/ogretmen":["admin","ogretmen"],"/alisveris-listelerim":["admin","ogretmen"],"/siparislerim":["admin","ogretmen"],"/talep":["admin","ogretmen"],"/satin":["admin","satin_alma"],"/stok":["admin","stok"]};function n(e){let a=(0,l.useRouter)(),[t,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=localStorage.getItem("aktifKullaniciId"),r=localStorage.getItem("role");if(!t||!r){a.replace("/");return}let l=s[e];if(!l){n(!0),d(!1);return}l.includes(r)?(n(!0),d(!1)):a.replace({admin:"/admin",ogretmen:"/ogretmen",satin_alma:"/satin",stok:"/stok",bolum_baskani:"/bolum-baskani"}[r]||"/")},[e,a]),{yetkili:t,yukleniyor:i}}},4786:function(e,a,t){"use strict";t.d(a,{O:function(){return r}});let r=(0,t(5674).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")}},function(e){e.O(0,[135,233,115,205,744],function(){return e(e.s=1452)}),_N_E=e.O()}]);