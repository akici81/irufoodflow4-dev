(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{579:function(e,a,t){Promise.resolve().then(t.bind(t,7010))},5561:function(e,a,t){"use strict";t.d(a,{Z:function(){return m}});var s=t(7821),r=t(4233),i=t(168),l=t(8078),n=t(4786);let d={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function m(e){var a;let{children:t,title:m,subtitle:c}=e,o=(0,i.usePathname)(),x=(0,i.useRouter)(),[u,h]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("aktifKullaniciId");if(!e){x.push("/");return}let{data:a,error:t}=await n.O.from("kullanicilar").select("id, username, ad_soyad, role").eq("id",e).single();if(t||!a){x.push("/");return}h(a)})()},[x]),!u)return null;let f=null!==(a=d[u.role])&&void 0!==a?a:[],b=(u.ad_soyad||u.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,s.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,s.jsx)("button",{onClick:()=>g(!p),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>g(!1)}),(0,s.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ".concat(p?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[(0,s.jsx)("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),(0,s.jsx)("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),(0,s.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:f.map(e=>{let a=o===e.path;return(0,s.jsx)(r.default,{href:e.path,className:"flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ".concat(a?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"),children:e.name},e.path)})}),(0,s.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white text-xs font-bold",children:b})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",children:u.ad_soyad||u.username}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:u.role})]})]}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),x.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,s.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[m&&(0,s.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[c&&(0,s.jsx)("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:c}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:m})]}),(0,s.jsx)("div",{className:"flex-1 p-8",children:t})]})]})}},7951:function(e,a,t){"use strict";t.d(a,{a:function(){return l}});var s=t(8078),r=t(168);let i={"/admin":["admin"],"/kullanicilar":["admin"],"/dersler":["admin","bolum_baskani"],"/siparisler":["admin"],"/siparis-yonetimi":["admin"],"/urun-havuzu":["admin","ogretmen"],"/receteler":["admin","ogretmen"],"/bolum-baskani":["admin","bolum_baskani"],"/ogretmen":["admin","ogretmen"],"/alisveris-listelerim":["admin","ogretmen"],"/siparislerim":["admin","ogretmen"],"/talep":["admin","ogretmen"],"/satin":["admin","satin_alma"],"/stok":["admin","stok"]};function l(e){let a=(0,r.useRouter)(),[t,l]=(0,s.useState)(!1),[n,d]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let t=localStorage.getItem("aktifKullaniciId"),s=localStorage.getItem("role");if(!t||!s){a.replace("/");return}let r=i[e];if(!r){l(!0),d(!1);return}r.includes(s)?(l(!0),d(!1)):a.replace({admin:"/admin",ogretmen:"/ogretmen",satin_alma:"/satin",stok:"/stok",bolum_baskani:"/bolum-baskani"}[s]||"/")},[e,a]),{yetkili:t,yukleniyor:n}}},7010:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var s=t(7821),r=t(8078),i=t(5561),l=t(7951),n=t(4786);function d(){let{yetkili:e,yukleniyor:a}=(0,l.a)("/siparis-yonetimi");if(a)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[t,d]=(0,r.useState)([]),[m,c]=(0,r.useState)("hepsi"),[o,x]=(0,r.useState)("tumu"),[u,h]=(0,r.useState)("tumu"),[p,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{f()},[]);let f=async()=>{let{data:e}=await n.O.from("siparisler").select("*").order("tarih",{ascending:!1});d((e||[]).map(e=>({id:e.id,ogretmenId:e.ogretmen_id,ogretmenAdi:e.ogretmen_adi,dersId:e.ders_id,dersAdi:e.ders_adi,hafta:e.hafta,urunler:e.urunler||[],genelToplam:e.genel_toplam,tarih:e.tarih,durum:e.durum})))},b=async e=>{confirm("Bu siparişi silmek istediğinizden emin misiniz?")&&(await n.O.from("siparisler").delete().eq("id",e),d(a=>a.filter(a=>a.id!==e)),(null==p?void 0:p.id)===e&&g(null))},y=async(e,a)=>{await n.O.from("siparisler").update({durum:a}).eq("id",e),d(t=>t.map(t=>t.id===e?{...t,durum:a}:t)),(null==p?void 0:p.id)===e&&g(e=>e?{...e,durum:a}:null)},j=["tumu",...Array.from(new Set(t.map(e=>e.ogretmenAdi)))],N=["tumu",...Array.from(new Set(t.map(e=>e.dersAdi)))],v=t.filter(e=>{let a="tumu"===o||e.ogretmenAdi===o,t="tumu"===u||e.dersAdi===u;return a&&t}),w="hepsi"===m?t:v;return(0,s.jsx)(i.Z,{title:"Sipariş Y\xf6netimi",subtitle:"T\xfcm siparişleri g\xf6r\xfcnt\xfcleyin ve y\xf6netin",children:(0,s.jsxs)("div",{className:"max-w-6xl space-y-5",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>c("hepsi"),className:"flex items-center gap-2 px-5 py-3 rounded-xl text-sm font-semibold transition ".concat("hepsi"===m?"bg-red-700 text-white":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"),children:["T\xfcm Siparişler (",t.length,")"]}),(0,s.jsx)("button",{onClick:()=>c("filtre"),className:"flex items-center gap-2 px-5 py-3 rounded-xl text-sm font-semibold transition ".concat("filtre"===m?"bg-red-700 text-white":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"),children:"\xd6ğretmen/Ders Se\xe7imi"})]}),"filtre"===m&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5 flex flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"\xd6ğretmen"}),(0,s.jsx)("select",{value:o,onChange:e=>x(e.target.value),className:"border border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-red-500 min-w-[200px]",children:j.map(e=>(0,s.jsx)("option",{value:e,children:"tumu"===e?"T\xfcm \xd6ğretmenler":e},e))})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Ders"}),(0,s.jsx)("select",{value:u,onChange:e=>h(e.target.value),className:"border border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-red-500 min-w-[240px]",children:N.map(e=>(0,s.jsx)("option",{value:e,children:"tumu"===e?"T\xfcm Dersler":e},e))})]})]}),(0,s.jsxs)("div",{className:"flex gap-5",children:[(0,s.jsxs)("div",{className:"flex-1 bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"font-semibold text-gray-800",children:"hepsi"===m?"T\xfcm Siparişler":"Filtrelenmiş Siparişler"}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["Toplam ",w.length," sipariş"]})]}),0===w.length?(0,s.jsx)("div",{className:"py-16 text-center text-gray-400 text-sm",children:"Sipariş bulunamadı."}):(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"bg-gray-50 border-b border-gray-100 text-left",children:["\xd6ĞRETMEN","DERS","HAFTA","\xdcR\xdcN SAYISI","TOPLAM TUTAR","İŞLEM"].map(e=>(0,s.jsx)("th",{className:"px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-50",children:w.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-5 py-4 font-semibold text-gray-800",children:e.ogretmenAdi}),(0,s.jsx)("td",{className:"px-5 py-4 text-gray-600 max-w-xs truncate",children:e.dersAdi}),(0,s.jsx)("td",{className:"px-5 py-4 text-gray-600",children:e.hafta}),(0,s.jsxs)("td",{className:"px-5 py-4 text-gray-600",children:[e.urunler.length," \xfcr\xfcn"]}),(0,s.jsxs)("td",{className:"px-5 py-4 font-semibold text-red-700",children:["₺",e.genelToplam.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,s.jsx)("td",{className:"px-5 py-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>g(e),className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 font-medium px-3 py-1.5 rounded-lg transition",children:"Detay"}),(0,s.jsx)("button",{onClick:()=>b(e.id),className:"text-xs bg-red-50 hover:bg-red-100 text-red-600 font-medium px-3 py-1.5 rounded-lg transition",children:"Sil"})]})})]},e.id))})]})]}),p&&(0,s.jsx)("div",{className:"w-80 flex-shrink-0",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6 sticky top-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800 text-sm",children:"Sipariş Detayı"}),(0,s.jsx)("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600 text-xl leading-none",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"\xd6ğretmen:"}),(0,s.jsx)("span",{className:"font-medium text-gray-800",children:p.ogretmenAdi})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Ders:"}),(0,s.jsx)("span",{className:"font-medium text-gray-800 text-right max-w-[160px]",children:p.dersAdi})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Hafta:"}),(0,s.jsx)("span",{className:"font-medium text-gray-800",children:p.hafta})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Tarih:"}),(0,s.jsx)("span",{className:"font-medium text-gray-800",children:p.tarih})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Durum:"}),(0,s.jsxs)("select",{value:p.durum,onChange:e=>y(p.id,e.target.value),className:"text-xs border border-gray-200 rounded-lg px-2 py-1 bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,s.jsx)("option",{value:"bekliyor",children:"Bekliyor"}),(0,s.jsx)("option",{value:"onaylandi",children:"Onaylandı"}),(0,s.jsx)("option",{value:"teslim_alindi",children:"Teslim Alındı"})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-100 pt-4",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"\xdcr\xfcnler"}),(0,s.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:p.urunler.map((e,a)=>(0,s.jsxs)("div",{className:"flex justify-between items-start text-xs py-2 border-b border-gray-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800",children:e.urunAdi}),(0,s.jsxs)("p",{className:"text-gray-400",children:[e.marka," \xb7 ",e.miktar," ",e.olcu]})]}),(0,s.jsxs)("span",{className:"font-semibold text-gray-700 ml-2",children:["₺",e.toplam.toFixed(2)]})]},a))}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-gray-200",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Toplam"}),(0,s.jsxs)("span",{className:"text-base font-bold text-red-700",children:["₺",p.genelToplam.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})]})})]})]})})}},4786:function(e,a,t){"use strict";t.d(a,{O:function(){return s}});let s=(0,t(5674).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")}},function(e){e.O(0,[135,233,115,205,744],function(){return e(e.s=579)}),_N_E=e.O()}]);