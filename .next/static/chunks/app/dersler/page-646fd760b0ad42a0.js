(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{346:function(e,a,r){Promise.resolve().then(r.bind(r,6696))},5561:function(e,a,r){"use strict";r.d(a,{Z:function(){return o}});var t=r(7821),s=r(4233),i=r(168),l=r(8078),n=r(4786);let d={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function o(e){var a;let{children:r,title:o,subtitle:m}=e,c=(0,i.usePathname)(),u=(0,i.useRouter)(),[x,g]=(0,l.useState)(null),[f,p]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("aktifKullaniciId");if(!e){u.push("/");return}let{data:a,error:r}=await n.O.from("kullanicilar").select("id, username, ad_soyad, role").eq("id",e).single();if(r||!a){u.push("/");return}g(a)})()},[u]),!x)return null;let h=null!==(a=d[x.role])&&void 0!==a?a:[],b=(x.ad_soyad||x.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,t.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,t.jsx)("button",{onClick:()=>p(!f),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),f&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>p(!1)}),(0,t.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ".concat(f?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[(0,t.jsx)("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),(0,t.jsx)("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),(0,t.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:h.map(e=>{let a=c===e.path;return(0,t.jsx)(s.default,{href:e.path,className:"flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ".concat(a?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"),children:e.name},e.path)})}),(0,t.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:b})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",children:x.ad_soyad||x.username}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:x.role})]})]}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),u.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,t.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[o&&(0,t.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[m&&(0,t.jsx)("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:m}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:o})]}),(0,t.jsx)("div",{className:"flex-1 p-8",children:r})]})]})}},6696:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return d}});var t=r(7821),s=r(8078),i=r(5561),l=r(7951),n=r(4786);function d(){let{yetkili:e,yukleniyor:a}=(0,l.a)("/dersler");if(a)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[r,d]=(0,s.useState)([]),[o,m]=(0,s.useState)([]),[c,u]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[f,p]=(0,s.useState)("guz"),[h,b]=(0,s.useState)(""),[y,v]=(0,s.useState)(""),[j,k]=(0,s.useState)(null),[N,w]=(0,s.useState)({});(0,s.useEffect)(()=>{z()},[]);let z=async()=>{let[{data:e},{data:a}]=await Promise.all([n.O.from("dersler").select("*").order("kod"),n.O.from("kullanicilar").select("id, username, ad_soyad, role, dersler").eq("role","ogretmen")]);d(e||[]),m(a||[])},S=(e,a)=>{"basari"===e?(v(a),setTimeout(()=>v(""),3e3)):(b(a),setTimeout(()=>b(""),3e3))},C=async()=>{if(!c.trim()||!x.trim()){S("hata","Kod ve ad bos olamaz.");return}if(r.some(e=>e.kod===c.trim().toUpperCase())){S("hata","Bu ders kodu zaten mevcut.");return}let{error:e}=await n.O.from("dersler").insert({kod:c.trim().toUpperCase(),ad:x.trim(),donem:f});if(e){S("hata","Hata: "+e.message);return}u(""),g(""),S("basari",'"'.concat(c.toUpperCase()," - ").concat(x,'" eklendi.')),z()},I=async(e,a)=>{for(let t of r.filter(a=>(a.donem||"guz")===e))await n.O.from("dersler").update({aktif:a}).eq("id",t.id);S("basari","".concat("guz"===e?"Guz":"Bahar"," dersleri ").concat(a?"aktif":"pasif"," yapildi.")),z()},O=(e,a)=>{let r={};a.forEach(e=>{r[e.id]={kod:e.kod,ad:e.ad,donem:e.donem||"guz"}}),w(r),k(e)},_=async()=>{for(let[e,a]of Object.entries(N))await n.O.from("dersler").update({kod:a.kod.toUpperCase(),ad:a.ad,donem:a.donem}).eq("id",e);k(null),S("basari","Dersler guncellendi."),z()},D=async(e,a)=>{await n.O.from("dersler").update({aktif:!a}).eq("id",e),z()},q=async e=>{if(!confirm("Bu dersi silmek istediginizden emin misiniz?"))return;for(let a of o.filter(a=>(a.dersler||[]).includes(e)))await n.O.from("kullanicilar").update({dersler:a.dersler.filter(a=>a!==e)}).eq("id",a.id);let{error:a}=await n.O.from("dersler").delete().eq("id",e);if(a){S("hata","Hata: "+a.message);return}S("basari","Ders silindi."),z()},A=async(e,a,r)=>{let t=o.find(a=>a.id===e);if(t){if(r){let r=o.find(r=>r.id!==e&&(r.dersler||[]).includes(a));r&&await n.O.from("kullanicilar").update({dersler:r.dersler.filter(e=>e!==a)}).eq("id",r.id),await n.O.from("kullanicilar").update({dersler:[...t.dersler||[],a]}).eq("id",e)}else await n.O.from("kullanicilar").update({dersler:(t.dersler||[]).filter(e=>e!==a)}).eq("id",e);z()}},E=e=>o.filter(a=>(a.dersler||[]).includes(e)),Y=r.filter(e=>"guz"===(e.donem||"guz")),B=r.filter(e=>"bahar"===e.donem),J=r.filter(e=>"secmeli"===e.donem),U=e=>{let{baslik:a,donem:r,grup:s}=e,i=j===r;return(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center gap-3 flex-wrap",children:[(0,t.jsx)("h2",{className:"font-semibold text-gray-800",children:a}),(0,t.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-500 px-3 py-1 rounded-full font-medium",children:[s.length," ders"]}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:["secmeli"!==r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{type:"button",onClick:()=>I(r,!0),className:"text-xs bg-emerald-50 hover:bg-emerald-100 text-emerald-700 border border-emerald-200 font-medium px-3 py-1.5 rounded-lg transition",children:"Tumunu Aktif"}),(0,t.jsx)("button",{type:"button",onClick:()=>I(r,!1),className:"text-xs bg-gray-50 hover:bg-gray-100 text-gray-500 border border-gray-200 font-medium px-3 py-1.5 rounded-lg transition",children:"Tumunu Pasif"})]}),i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{type:"button",onClick:_,className:"text-xs bg-red-700 hover:bg-red-800 text-white font-semibold px-3 py-1.5 rounded-lg transition",children:"Kaydet"}),(0,t.jsx)("button",{type:"button",onClick:()=>k(null),className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 font-medium px-3 py-1.5 rounded-lg transition",children:"Iptal"})]}):(0,t.jsx)("button",{type:"button",onClick:()=>O(r,s),className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 border border-blue-200 font-medium px-3 py-1.5 rounded-lg transition",children:"Duzenle"})]})]}),0===s.length?(0,t.jsxs)("div",{className:"py-12 text-center text-gray-400 text-sm",children:[a," icin ders eklenmemis."]}):i?(0,t.jsx)("div",{className:"divide-y divide-gray-50",children:s.map(e=>{var a,r;return(0,t.jsxs)("div",{className:"px-6 py-3 flex gap-3 items-center",children:[(0,t.jsx)("input",{value:(null===(a=N[e.id])||void 0===a?void 0:a.kod)||"",onChange:a=>w(r=>({...r,[e.id]:{...r[e.id],kod:a.target.value}})),className:"border border-gray-200 rounded-lg px-3 py-1.5 text-sm w-28 focus:outline-none focus:ring-2 focus:ring-red-500"}),(0,t.jsx)("input",{value:(null===(r=N[e.id])||void 0===r?void 0:r.ad)||"",onChange:a=>w(r=>({...r,[e.id]:{...r[e.id],ad:a.target.value}})),className:"border border-gray-200 rounded-lg px-3 py-1.5 text-sm flex-1 focus:outline-none focus:ring-2 focus:ring-red-500"}),(0,t.jsx)("div",{className:"flex gap-1",children:["guz","bahar","secmeli"].map(a=>{var r;return(0,t.jsx)("button",{type:"button",onClick:()=>w(r=>({...r,[e.id]:{...r[e.id],donem:a}})),className:"px-2.5 py-1.5 rounded-lg text-xs font-medium border transition ".concat((null===(r=N[e.id])||void 0===r?void 0:r.donem)===a?"bg-red-700 text-white border-red-700":"bg-white text-gray-400 border-gray-200 hover:bg-gray-50"),children:"guz"===a?"Guz":"bahar"===a?"Bahar":"Secmeli"},a)})}),(0,t.jsx)("button",{type:"button",onClick:()=>q(e.id),className:"text-xs text-red-400 hover:text-red-600 font-medium transition",children:"Sil"})]},e.id)})}):(0,t.jsx)("div",{className:"divide-y divide-gray-50",children:s.map(e=>{let a=E(e.id);return(0,t.jsx)("div",{className:"p-6 ".concat(!1===e.aktif?"opacity-60":""),children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("span",{className:"text-xs font-bold bg-red-100 text-red-700 px-2.5 py-1 rounded-lg",children:e.kod}),(0,t.jsx)("span",{className:"font-semibold text-gray-800",children:e.ad}),!1===e.aktif&&(0,t.jsx)("span",{className:"text-xs bg-gray-100 text-gray-400 border border-gray-200 px-2 py-0.5 rounded-full",children:"Pasif"}),a.length>0&&(0,t.jsx)("span",{className:"text-xs bg-green-50 text-green-600 border border-green-200 px-2 py-0.5 rounded-full",children:a[0].ad_soyad||a[0].username})]}),!1===e.aktif?(0,t.jsx)("p",{className:"text-xs text-gray-400 italic",children:"Bu ders bu donem acik degil — atama yapilamaz."}):o.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map(r=>{let s=(r.dersler||[]).includes(e.id),i=!s&&a.length>0;return(0,t.jsxs)("button",{type:"button",onClick:()=>A(r.id,e.id,!s),title:i?"Bu ders su an ".concat(a[0].ad_soyad||a[0].username," uzerinde."):"",className:"text-xs px-3 py-1.5 rounded-full border font-medium transition ".concat(s?"bg-green-100 text-green-700 border-green-200 hover:bg-green-200":i?"bg-gray-50 text-gray-300 border-gray-100 hover:bg-amber-50 hover:text-amber-600 hover:border-amber-200":"bg-gray-100 text-gray-500 border-gray-200 hover:bg-gray-200"),children:[s?"- ":"+ ",r.ad_soyad||r.username]},r.id)})}):(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Ogretmen atamak icin once ogretmen ekleyin."})]}),(0,t.jsx)("div",{className:"flex items-center gap-3 flex-shrink-0",children:(0,t.jsx)("button",{type:"button",onClick:()=>D(e.id,!1!==e.aktif),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(!1!==e.aktif?"bg-emerald-500":"bg-gray-300"),children:(0,t.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform ".concat(!1!==e.aktif?"translate-x-6":"translate-x-1")})})})]})},e.id)})})]})};return(0,t.jsx)(i.Z,{title:"Ders Yonetimi",subtitle:"Dersleri ekleyin ve ogretmenlere atayin",children:(0,t.jsxs)("div",{className:"max-w-5xl space-y-6",children:[y&&(0,t.jsx)("div",{className:"bg-emerald-50 border border-emerald-200 text-emerald-700 text-sm rounded-xl px-4 py-3",children:y}),h&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm rounded-xl px-4 py-3",children:h}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"font-semibold text-gray-800 mb-4",children:"Yeni Ders Ekle"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 items-end",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Ders Kodu *"}),(0,t.jsx)("input",{value:c,onChange:e=>u(e.target.value),placeholder:"ASC112",className:"border border-gray-200 rounded-xl px-4 py-2.5 text-sm w-36 focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 flex-1 min-w-[240px]",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Ders Adi *"}),(0,t.jsx)("input",{value:x,onChange:e=>g(e.target.value),placeholder:"Yoresel Mutfaklar",className:"border border-gray-300 rounded-xl px-4 py-2.5 text-sm text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-700",children:"Donem *"}),(0,t.jsx)("div",{className:"flex gap-2",children:["guz","bahar","secmeli"].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>p(e),className:"px-4 py-2.5 rounded-xl text-sm font-semibold border transition ".concat(f===e?"bg-red-700 text-white border-red-700":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50"),children:"guz"===e?"Guz":"bahar"===e?"Bahar":"Secmeli"},e))})]}),(0,t.jsx)("button",{type:"button",onClick:C,className:"bg-red-700 hover:bg-red-800 text-white text-sm font-semibold px-5 py-2.5 rounded-xl transition",children:"Ders Ekle"})]})]}),(0,t.jsx)(U,{baslik:"Guz Donemi",donem:"guz",grup:Y}),(0,t.jsx)(U,{baslik:"Bahar Donemi",donem:"bahar",grup:B}),(0,t.jsx)(U,{baslik:"Secmeli Havuzu",donem:"secmeli",grup:J})]})})}},7951:function(e,a,r){"use strict";r.d(a,{a:function(){return l}});var t=r(8078),s=r(168);let i={"/admin":["admin"],"/kullanicilar":["admin"],"/dersler":["admin","bolum_baskani"],"/siparisler":["admin"],"/siparis-yonetimi":["admin"],"/urun-havuzu":["admin","ogretmen"],"/receteler":["admin","ogretmen"],"/bolum-baskani":["admin","bolum_baskani"],"/ogretmen":["admin","ogretmen"],"/alisveris-listelerim":["admin","ogretmen"],"/siparislerim":["admin","ogretmen"],"/talep":["admin","ogretmen"],"/satin":["admin","satin_alma"],"/stok":["admin","stok"]};function l(e){let a=(0,s.useRouter)(),[r,l]=(0,t.useState)(!1),[n,d]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{let r=localStorage.getItem("aktifKullaniciId"),t=localStorage.getItem("role");if(!r||!t){a.replace("/");return}let s=i[e];if(!s){l(!0),d(!1);return}s.includes(t)?(l(!0),d(!1)):a.replace({admin:"/admin",ogretmen:"/ogretmen",satin_alma:"/satin",stok:"/stok",bolum_baskani:"/bolum-baskani"}[t]||"/")},[e,a]),{yetkili:r,yukleniyor:n}}},4786:function(e,a,r){"use strict";r.d(a,{O:function(){return t}});let t=(0,r(5674).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")}},function(e){e.O(0,[135,233,115,205,744],function(){return e(e.s=346)}),_N_E=e.O()}]);