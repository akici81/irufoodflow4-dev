(()=>{var e={};e.id=547,e.ids=[547],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},1669:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>c,pages:()=>m,routeModule:()=>x,tree:()=>o}),t(7168),t(1163),t(2874);var a=t(7105),s=t(5265),i=t(157),l=t.n(i),n=t(4665),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(r,d);let o=["",{children:["dersler",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7168)),"C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\dersler\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,1163)),"C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2874,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],m=["C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\dersler\\page.tsx"],c="/dersler/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dersler/page",pathname:"/dersler",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9821:(e,r,t)=>{Promise.resolve().then(t.bind(t,9638))},869:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,3817,23)),Promise.resolve().then(t.t.bind(t,9323,23)),Promise.resolve().then(t.t.bind(t,2204,23)),Promise.resolve().then(t.t.bind(t,820,23)),Promise.resolve().then(t.t.bind(t,5915,23)),Promise.resolve().then(t.t.bind(t,1611,23))},1205:()=>{},785:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var a=t(9899),s=t(4175),i=t(6153),l=t(5507);t(24);let n={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function d({children:e,title:r,subtitle:t}){let d=(0,i.usePathname)(),o=(0,i.useRouter)(),[m,c]=(0,l.useState)(null),[u,x]=(0,l.useState)(!1);if(!m)return null;let p=n[m.role]??[],g=(m.ad_soyad||m.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,a.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[a.jsx("button",{onClick:()=>x(!u),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>x(!1)}),(0,a.jsxs)("aside",{className:`w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ${u?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[a.jsx("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-2.5",children:[a.jsx("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),a.jsx("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:p.map(e=>{let r=d===e.path;return a.jsx(s.default,{href:e.path,className:`flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ${r?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"}`,children:e.name},e.path)})}),(0,a.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-xs font-bold",children:g})}),(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:m.ad_soyad||m.username}),a.jsx("p",{className:"text-xs text-gray-400",children:m.role})]})]}),a.jsx("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),o.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[r&&(0,a.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[t&&a.jsx("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:t}),a.jsx("h1",{className:"text-2xl font-bold",children:r})]}),a.jsx("div",{className:"flex-1 p-8",children:e})]})]})}},9638:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(9899),s=t(5507),i=t(785),l=t(895),n=t(24);function d(){let{yetkili:e,yukleniyor:r}=(0,l.a)("/dersler");if(r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[t,d]=(0,s.useState)([]),[o,m]=(0,s.useState)([]),[c,u]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[g,h]=(0,s.useState)("guz"),[f,b]=(0,s.useState)(""),[y,v]=(0,s.useState)(""),[j,N]=(0,s.useState)(null),[k,w]=(0,s.useState)({}),z=async()=>{let[{data:e},{data:r}]=await Promise.all([n.O.from("dersler").select("*").order("kod"),n.O.from("kullanicilar").select("id, username, ad_soyad, role, dersler").eq("role","ogretmen")]);d(e||[]),m(r||[])},C=(e,r)=>{"basari"===e?(v(r),setTimeout(()=>v(""),3e3)):(b(r),setTimeout(()=>b(""),3e3))},S=async()=>{if(!c.trim()||!x.trim()){C("hata","Kod ve ad bos olamaz.");return}if(t.some(e=>e.kod===c.trim().toUpperCase())){C("hata","Bu ders kodu zaten mevcut.");return}let{error:e}=await n.O.from("dersler").insert({kod:c.trim().toUpperCase(),ad:x.trim(),donem:g});if(e){C("hata","Hata: "+e.message);return}u(""),p(""),C("basari",`"${c.toUpperCase()} - ${x}" eklendi.`),z()},P=async(e,r)=>{for(let a of t.filter(r=>(r.donem||"guz")===e))await n.O.from("dersler").update({aktif:r}).eq("id",a.id);C("basari",`${"guz"===e?"Guz":"Bahar"} dersleri ${r?"aktif":"pasif"} yapildi.`),z()},_=(e,r)=>{let t={};r.forEach(e=>{t[e.id]={kod:e.kod,ad:e.ad,donem:e.donem||"guz"}}),w(t),N(e)},q=async()=>{for(let[e,r]of Object.entries(k))await n.O.from("dersler").update({kod:r.kod.toUpperCase(),ad:r.ad,donem:r.donem}).eq("id",e);N(null),C("basari","Dersler guncellendi."),z()},I=async(e,r)=>{await n.O.from("dersler").update({aktif:!r}).eq("id",e),z()},D=async e=>{if(!confirm("Bu dersi silmek istediginizden emin misiniz?"))return;for(let r of o.filter(r=>(r.dersler||[]).includes(e)))await n.O.from("kullanicilar").update({dersler:r.dersler.filter(r=>r!==e)}).eq("id",r.id);let{error:r}=await n.O.from("dersler").delete().eq("id",e);if(r){C("hata","Hata: "+r.message);return}C("basari","Ders silindi."),z()},O=async(e,r,t)=>{let a=o.find(r=>r.id===e);if(a){if(t){let t=o.find(t=>t.id!==e&&(t.dersler||[]).includes(r));t&&await n.O.from("kullanicilar").update({dersler:t.dersler.filter(e=>e!==r)}).eq("id",t.id),await n.O.from("kullanicilar").update({dersler:[...a.dersler||[],r]}).eq("id",e)}else await n.O.from("kullanicilar").update({dersler:(a.dersler||[]).filter(e=>e!==r)}).eq("id",e);z()}},$=e=>o.filter(r=>(r.dersler||[]).includes(e)),A=t.filter(e=>"guz"===(e.donem||"guz")),U=t.filter(e=>"bahar"===e.donem),G=t.filter(e=>"secmeli"===e.donem),M=({baslik:e,donem:r,grup:t})=>{let s=j===r;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center gap-3 flex-wrap",children:[a.jsx("h2",{className:"font-semibold text-gray-800",children:e}),(0,a.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-500 px-3 py-1 rounded-full font-medium",children:[t.length," ders"]}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:["secmeli"!==r&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>P(r,!0),className:"text-xs bg-emerald-50 hover:bg-emerald-100 text-emerald-700 border border-emerald-200 font-medium px-3 py-1.5 rounded-lg transition",children:"Tumunu Aktif"}),a.jsx("button",{type:"button",onClick:()=>P(r,!1),className:"text-xs bg-gray-50 hover:bg-gray-100 text-gray-500 border border-gray-200 font-medium px-3 py-1.5 rounded-lg transition",children:"Tumunu Pasif"})]}),s?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:q,className:"text-xs bg-red-700 hover:bg-red-800 text-white font-semibold px-3 py-1.5 rounded-lg transition",children:"Kaydet"}),a.jsx("button",{type:"button",onClick:()=>N(null),className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 font-medium px-3 py-1.5 rounded-lg transition",children:"Iptal"})]}):a.jsx("button",{type:"button",onClick:()=>_(r,t),className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 border border-blue-200 font-medium px-3 py-1.5 rounded-lg transition",children:"Duzenle"})]})]}),0===t.length?(0,a.jsxs)("div",{className:"py-12 text-center text-gray-400 text-sm",children:[e," icin ders eklenmemis."]}):s?a.jsx("div",{className:"divide-y divide-gray-50",children:t.map(e=>(0,a.jsxs)("div",{className:"px-6 py-3 flex gap-3 items-center",children:[a.jsx("input",{value:k[e.id]?.kod||"",onChange:r=>w(t=>({...t,[e.id]:{...t[e.id],kod:r.target.value}})),className:"border border-gray-200 rounded-lg px-3 py-1.5 text-sm w-28 focus:outline-none focus:ring-2 focus:ring-red-500"}),a.jsx("input",{value:k[e.id]?.ad||"",onChange:r=>w(t=>({...t,[e.id]:{...t[e.id],ad:r.target.value}})),className:"border border-gray-200 rounded-lg px-3 py-1.5 text-sm flex-1 focus:outline-none focus:ring-2 focus:ring-red-500"}),a.jsx("div",{className:"flex gap-1",children:["guz","bahar","secmeli"].map(r=>a.jsx("button",{type:"button",onClick:()=>w(t=>({...t,[e.id]:{...t[e.id],donem:r}})),className:`px-2.5 py-1.5 rounded-lg text-xs font-medium border transition ${k[e.id]?.donem===r?"bg-red-700 text-white border-red-700":"bg-white text-gray-400 border-gray-200 hover:bg-gray-50"}`,children:"guz"===r?"Guz":"bahar"===r?"Bahar":"Secmeli"},r))}),a.jsx("button",{type:"button",onClick:()=>D(e.id),className:"text-xs text-red-400 hover:text-red-600 font-medium transition",children:"Sil"})]},e.id))}):a.jsx("div",{className:"divide-y divide-gray-50",children:t.map(e=>{let r=$(e.id);return a.jsx("div",{className:`p-6 ${!1===e.aktif?"opacity-60":""}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("span",{className:"text-xs font-bold bg-red-100 text-red-700 px-2.5 py-1 rounded-lg",children:e.kod}),a.jsx("span",{className:"font-semibold text-gray-800",children:e.ad}),!1===e.aktif&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-400 border border-gray-200 px-2 py-0.5 rounded-full",children:"Pasif"}),r.length>0&&a.jsx("span",{className:"text-xs bg-green-50 text-green-600 border border-green-200 px-2 py-0.5 rounded-full",children:r[0].ad_soyad||r[0].username})]}),!1===e.aktif?a.jsx("p",{className:"text-xs text-gray-400 italic",children:"Bu ders bu donem acik degil — atama yapilamaz."}):o.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(t=>{let s=(t.dersler||[]).includes(e.id),i=!s&&r.length>0;return(0,a.jsxs)("button",{type:"button",onClick:()=>O(t.id,e.id,!s),title:i?`Bu ders su an ${r[0].ad_soyad||r[0].username} uzerinde.`:"",className:`text-xs px-3 py-1.5 rounded-full border font-medium transition ${s?"bg-green-100 text-green-700 border-green-200 hover:bg-green-200":i?"bg-gray-50 text-gray-300 border-gray-100 hover:bg-amber-50 hover:text-amber-600 hover:border-amber-200":"bg-gray-100 text-gray-500 border-gray-200 hover:bg-gray-200"}`,children:[s?"- ":"+ ",t.ad_soyad||t.username]},t.id)})}):a.jsx("p",{className:"text-xs text-gray-400",children:"Ogretmen atamak icin once ogretmen ekleyin."})]}),a.jsx("div",{className:"flex items-center gap-3 flex-shrink-0",children:a.jsx("button",{type:"button",onClick:()=>I(e.id,!1!==e.aktif),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${!1!==e.aktif?"bg-emerald-500":"bg-gray-300"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform ${!1!==e.aktif?"translate-x-6":"translate-x-1"}`})})})]})},e.id)})})]})};return a.jsx(i.Z,{title:"Ders Yonetimi",subtitle:"Dersleri ekleyin ve ogretmenlere atayin",children:(0,a.jsxs)("div",{className:"max-w-5xl space-y-6",children:[y&&a.jsx("div",{className:"bg-emerald-50 border border-emerald-200 text-emerald-700 text-sm rounded-xl px-4 py-3",children:y}),f&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm rounded-xl px-4 py-3",children:f}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:[a.jsx("h2",{className:"font-semibold text-gray-800 mb-4",children:"Yeni Ders Ekle"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 items-end",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Ders Kodu *"}),a.jsx("input",{value:c,onChange:e=>u(e.target.value),placeholder:"ASC112",className:"border border-gray-200 rounded-xl px-4 py-2.5 text-sm w-36 focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 flex-1 min-w-[240px]",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Ders Adi *"}),a.jsx("input",{value:x,onChange:e=>p(e.target.value),placeholder:"Yoresel Mutfaklar",className:"border border-gray-300 rounded-xl px-4 py-2.5 text-sm text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Donem *"}),a.jsx("div",{className:"flex gap-2",children:["guz","bahar","secmeli"].map(e=>a.jsx("button",{type:"button",onClick:()=>h(e),className:`px-4 py-2.5 rounded-xl text-sm font-semibold border transition ${g===e?"bg-red-700 text-white border-red-700":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50"}`,children:"guz"===e?"Guz":"bahar"===e?"Bahar":"Secmeli"},e))})]}),a.jsx("button",{type:"button",onClick:S,className:"bg-red-700 hover:bg-red-800 text-white text-sm font-semibold px-5 py-2.5 rounded-xl transition",children:"Ders Ekle"})]})]}),a.jsx(M,{baslik:"Guz Donemi",donem:"guz",grup:A}),a.jsx(M,{baslik:"Bahar Donemi",donem:"bahar",grup:U}),a.jsx(M,{baslik:"Secmeli Havuzu",donem:"secmeli",grup:G})]})})}},895:(e,r,t)=>{"use strict";t.d(r,{a:()=>i});var a=t(5507),s=t(6153);function i(e){(0,s.useRouter)();let[r,t]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!0);return{yetkili:r,yukleniyor:i}}},24:(e,r,t)=>{"use strict";t.d(r,{O:()=>a});let a=(0,t(7994).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")},7168:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>l,__esModule:()=>i,default:()=>n});var a=t(2772);let s=(0,a.createProxy)(String.raw`C:\Users\enisa\Desktop\irufoodflow4-dev\app\dersler\page.tsx`),{__esModule:i,$$typeof:l}=s;s.default;let n=(0,a.createProxy)(String.raw`C:\Users\enisa\Desktop\irufoodflow4-dev\app\dersler\page.tsx#default`)},1163:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n,metadata:()=>l});var a=t(5023),s=t(1695),i=t.n(s);t(642);let l={title:"IRU FoodFlow",description:"Okul yemek talep y\xf6netim sistemi"};function n({children:e}){return a.jsx("html",{lang:"tr",children:a.jsx("body",{className:`${i().variable} antialiased`,children:e})})}},7418:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var a=t(1645);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},642:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[916,617,948,175],()=>t(1669));module.exports=a})();