(()=>{var e={};e.id=105,e.ids=[105],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},8142:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>c,pages:()=>m,routeModule:()=>u,tree:()=>o}),a(7389),a(1163),a(2874);var r=a(7105),s=a(5265),l=a(157),i=a.n(l),n=a(4665),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["siparisler",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7389)),"C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\siparisler\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,1163)),"C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,2874,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],m=["C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\siparisler\\page.tsx"],c="/siparisler/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/siparisler/page",pathname:"/siparisler",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},402:(e,t,a)=>{Promise.resolve().then(a.bind(a,2172))},869:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,3817,23)),Promise.resolve().then(a.t.bind(a,9323,23)),Promise.resolve().then(a.t.bind(a,2204,23)),Promise.resolve().then(a.t.bind(a,820,23)),Promise.resolve().then(a.t.bind(a,5915,23)),Promise.resolve().then(a.t.bind(a,1611,23))},1205:()=>{},785:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(9899),s=a(4175),l=a(6153),i=a(5507);a(24);let n={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function d({children:e,title:t,subtitle:a}){let d=(0,l.usePathname)(),o=(0,l.useRouter)(),[m,c]=(0,i.useState)(null),[x,u]=(0,i.useState)(!1);if(!m)return null;let p=n[m.role]??[],h=(m.ad_soyad||m.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[r.jsx("button",{onClick:()=>u(!x),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>u(!1)}),(0,r.jsxs)("aside",{className:`w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ${x?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[r.jsx("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[r.jsx("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),r.jsx("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:p.map(e=>{let t=d===e.path;return r.jsx(s.default,{href:e.path,className:`flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ${t?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"}`,children:e.name},e.path)})}),(0,r.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white text-xs font-bold",children:h})}),(0,r.jsxs)("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:m.ad_soyad||m.username}),r.jsx("p",{className:"text-xs text-gray-400",children:m.role})]})]}),r.jsx("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),o.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[t&&(0,r.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[a&&r.jsx("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:a}),r.jsx("h1",{className:"text-2xl font-bold",children:t})]}),r.jsx("div",{className:"flex-1 p-8",children:e})]})]})}},895:(e,t,a)=>{"use strict";a.d(t,{a:()=>l});var r=a(5507),s=a(6153);function l(e){(0,s.useRouter)();let[t,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(!0);return{yetkili:t,yukleniyor:l}}},2172:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(9899),s=a(5507),l=a(785),i=a(895),n=a(24);let d={bekliyor:"bg-amber-100 text-amber-700 border-amber-200",onaylandi:"bg-blue-100 text-blue-700 border-blue-200",teslim_alindi:"bg-emerald-100 text-emerald-700 border-emerald-200"},o={bekliyor:"⏳ Bekliyor",onaylandi:" Onaylandı",teslim_alindi:" Teslim Alındı"};function m(){let{yetkili:e,yukleniyor:t}=(0,i.a)("/siparisler");if(t)return r.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[m,c]=(0,s.useState)([]),[x,u]=(0,s.useState)(null),[p,h]=(0,s.useState)("tumu"),[g,b]=(0,s.useState)("tumu"),[f,y]=(0,s.useState)("tumu"),[j,v]=(0,s.useState)(""),N=async()=>{let{data:e}=await n.O.from("siparisler").select("*").order("tarih",{ascending:!1});c((e||[]).map(e=>({id:e.id,ogretmenId:e.ogretmen_id,ogretmenAdi:e.ogretmen_adi,dersId:e.ders_id,dersAdi:e.ders_adi,hafta:e.hafta,urunler:e.urunler||[],genelToplam:e.genel_toplam,tarih:e.tarih,durum:e.durum})))},k=async(e,t)=>{await n.O.from("siparisler").update({durum:t}).eq("id",e),c(a=>a.map(a=>a.id===e?{...a,durum:t}:a)),x?.id===e&&u(e=>e?{...e,durum:t}:null)},w=async e=>{confirm("Bu alışveriş listesini silmek istediğinizden emin misiniz?")&&(await n.O.from("siparisler").delete().eq("id",e),c(t=>t.filter(t=>t.id!==e)),x?.id===e&&u(null))},A=async()=>{if(confirm("G\xf6r\xfcnt\xfclenen t\xfcm bekleyen listeler onaylanacak. Emin misiniz?")){for(let e of S.filter(e=>"bekliyor"===e.durum).map(e=>e.id))await n.O.from("siparisler").update({durum:"onaylandi"}).eq("id",e);N()}},_=["tumu",...Array.from(new Set(m.map(e=>e.hafta))).sort()],C=["tumu",...Array.from(new Set(m.map(e=>e.ogretmenAdi))).sort()],S=m.filter(e=>{let t="tumu"===p||e.hafta===p,a="tumu"===g||e.ogretmenAdi===g,r="tumu"===f||e.durum===f,s=!j||e.ogretmenAdi.toLowerCase().includes(j.toLowerCase())||e.dersAdi.toLowerCase().includes(j.toLowerCase());return t&&a&&r&&s});S.reduce((e,t)=>e+t.genelToplam,0);let T=m.filter(e=>"bekliyor"===e.durum).length,P=m.filter(e=>"onaylandi"===e.durum).length,I=m.filter(e=>"teslim_alindi"===e.durum).length,z=async()=>{if(0===S.length)return;let e=await a.e(935).then(a.bind(a,9935)),t=S.flatMap(e=>e.urunler.map(t=>({Öğretmen:e.ogretmenAdi,Ders:e.dersAdi,Hafta:e.hafta,Tarih:e.tarih,Durum:o[e.durum]??e.durum,"\xdcr\xfcn Adı":t.urunAdi,Marka:t.marka||"-",Miktar:t.miktar,Ölçü:t.olcu,"Birim Fiyat":t.birimFiyat||0,Toplam:t.toplam||0}))),r=e.utils.json_to_sheet(t),s=e.utils.book_new();e.utils.book_append_sheet(s,r,"Alışveriş Listeleri"),e.writeFile(s,`Alisveris_Listeleri_${new Date().toLocaleDateString("tr-TR").replace(/\./g,"-")}.xlsx`)};return r.jsx(l.Z,{title:"Alışveriş Listeleri",subtitle:"T\xfcm \xf6ğretmen taleplerini g\xf6r\xfcnt\xfcleyin ve y\xf6netin",children:(0,r.jsxs)("div",{className:"max-w-7xl space-y-5",children:[r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Toplam Liste",deger:m.length,renk:"text-gray-800"},{label:"Bekliyor",deger:T,renk:"text-amber-600"},{label:"Onaylandı",deger:P,renk:"text-blue-600"},{label:"Teslim Alındı",deger:I,renk:"text-emerald-600"}].map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5 text-center",children:[r.jsx("p",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider mb-1",children:e.label}),r.jsx("p",{className:`text-3xl font-bold ${e.renk}`,children:e.deger})]},e.label))}),r.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 items-end",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Arama"}),r.jsx("input",{value:j,onChange:e=>v(e.target.value),placeholder:"\xd6ğretmen veya ders ara...",className:"border border-gray-300 rounded-xl px-4 py-2.5 text-sm text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 w-52"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Hafta"}),r.jsx("select",{value:p,onChange:e=>h(e.target.value),className:"border border-gray-300 rounded-xl px-4 py-2.5 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:_.map(e=>r.jsx("option",{value:e,children:"tumu"===e?"T\xfcm Haftalar":e},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"\xd6ğretmen"}),r.jsx("select",{value:g,onChange:e=>b(e.target.value),className:"border border-gray-300 rounded-xl px-4 py-2.5 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500 min-w-[180px]",children:C.map(e=>r.jsx("option",{value:e,children:"tumu"===e?"T\xfcm \xd6ğretmenler":e},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Durum"}),(0,r.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"border border-gray-300 rounded-xl px-4 py-2.5 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[r.jsx("option",{value:"tumu",children:"T\xfcm Durumlar"}),r.jsx("option",{value:"bekliyor",children:"Bekliyor"}),r.jsx("option",{value:"onaylandi",children:"Onaylandı"}),r.jsx("option",{value:"teslim_alindi",children:"Teslim Alındı"})]})]}),(0,r.jsxs)("div",{className:"ml-auto flex items-end gap-3",children:[T>0&&r.jsx("button",{type:"button",onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold px-4 py-2.5 rounded-xl transition",children:"T\xfcm\xfcn\xfc Onayla"}),r.jsx("button",{type:"button",onClick:z,disabled:0===S.length,className:"bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-semibold px-4 py-2.5 rounded-xl transition disabled:opacity-40",children:"Excel'e Aktar"})]})]})}),(0,r.jsxs)("div",{className:"flex gap-5",children:[r.jsx("div",{className:"flex-1 bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:0===S.length?r.jsx("div",{className:"py-20 text-center text-gray-400 text-sm",children:0===m.length?"Hen\xfcz alışveriş listesi oluşturulmamış.":"Bu filtreye uygun liste bulunamadı."}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsx("tr",{className:"bg-gray-50 border-b border-gray-100 text-left",children:["\xd6ĞRETMEN","DERS","HAFTA","\xdcR\xdcN","TUTAR","DURUM","İŞLEM"].map(e=>r.jsx("th",{className:"px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e},e))})}),r.jsx("tbody",{className:"divide-y divide-gray-50",children:S.map(e=>(0,r.jsxs)("tr",{onClick:()=>u(x?.id===e.id?null:e),className:`cursor-pointer transition-colors ${x?.id===e.id?"bg-red-50":"hover:bg-gray-50"}`,children:[r.jsx("td",{className:"px-5 py-4 font-semibold text-gray-800",children:e.ogretmenAdi}),r.jsx("td",{className:"px-5 py-4 text-gray-600 max-w-[200px] truncate",children:e.dersAdi}),r.jsx("td",{className:"px-5 py-4 text-gray-600",children:e.hafta}),(0,r.jsxs)("td",{className:"px-5 py-4 text-gray-500",children:[e.urunler.length," \xfcr\xfcn"]}),r.jsx("td",{className:"px-5 py-4 font-semibold text-red-700",children:e.genelToplam>0?`₺${e.genelToplam.toLocaleString("tr-TR",{minimumFractionDigits:2})}`:"—"}),r.jsx("td",{className:"px-5 py-4",children:(0,r.jsxs)("select",{value:e.durum,onChange:t=>{t.stopPropagation(),k(e.id,t.target.value)},onClick:e=>e.stopPropagation(),className:`text-xs font-medium px-2.5 py-1 rounded-lg border cursor-pointer focus:outline-none ${d[e.durum]??""}`,children:[r.jsx("option",{value:"bekliyor",children:"⏳ Bekliyor"}),r.jsx("option",{value:"onaylandi",children:"Onaylandı"}),r.jsx("option",{value:"teslim_alindi",children:"Teslim Alındı"})]})}),r.jsx("td",{className:"px-5 py-4",onClick:e=>e.stopPropagation(),children:(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>u(x?.id===e.id?null:e),className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 font-medium px-3 py-1.5 rounded-lg transition",children:"Detay"}),r.jsx("button",{onClick:()=>w(e.id),className:"text-xs bg-red-50 hover:bg-red-100 text-red-600 font-medium px-3 py-1.5 rounded-lg transition",children:"Sil"})]})})]},e.id))})]})}),x&&r.jsx("div",{className:"w-80 flex-shrink-0",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6 sticky top-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Liste Detayı"}),r.jsx("button",{type:"button",onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600 text-xl leading-none",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"space-y-2 mb-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"\xd6ğretmen"}),r.jsx("span",{className:"font-medium text-gray-800",children:x.ogretmenAdi})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Ders"}),r.jsx("span",{className:"font-medium text-gray-800 text-right max-w-[160px]",children:x.dersAdi})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Hafta"}),r.jsx("span",{className:"font-medium text-gray-800",children:x.hafta})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tarih"}),r.jsx("span",{className:"font-medium text-gray-800",children:x.tarih})]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-100 pt-4",children:[(0,r.jsxs)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:["\xdcr\xfcnler (",x.urunler.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:x.urunler.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-start text-xs py-2 border-b border-gray-50 last:border-0",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:e.urunAdi}),(0,r.jsxs)("p",{className:"text-gray-400",children:[e.marka&&`${e.marka} \xb7 `,e.miktar," ",e.olcu]})]}),r.jsx("span",{className:"font-semibold text-gray-700 ml-3",children:e.toplam>0?`₺${e.toplam.toFixed(2)}`:"—"})]},t))}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-gray-200",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Genel Toplam"}),r.jsx("span",{className:"text-base font-bold text-red-700",children:x.genelToplam>0?`₺${x.genelToplam.toLocaleString("tr-TR",{minimumFractionDigits:2})}`:"—"})]})]})]})})]})]})})}},24:(e,t,a)=>{"use strict";a.d(t,{O:()=>r});let r=(0,a(7994).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")},1163:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,metadata:()=>i});var r=a(5023),s=a(1695),l=a.n(s);a(642);let i={title:"IRU FoodFlow",description:"Okul yemek talep y\xf6netim sistemi"};function n({children:e}){return r.jsx("html",{lang:"tr",children:r.jsx("body",{className:`${l().variable} antialiased`,children:e})})}},7389:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var r=a(2772);let s=(0,r.createProxy)(String.raw`C:\Users\enisa\Desktop\irufoodflow4-dev\app\siparisler\page.tsx`),{__esModule:l,$$typeof:i}=s;s.default;let n=(0,r.createProxy)(String.raw`C:\Users\enisa\Desktop\irufoodflow4-dev\app\siparisler\page.tsx#default`)},7418:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(1645);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},642:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[916,617,948,175],()=>a(8142));module.exports=r})();