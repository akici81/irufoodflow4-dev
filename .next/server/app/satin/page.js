(()=>{var e={};e.id=883,e.ids=[883],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},4126:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),a(6362),a(1163),a(2874);var r=a(7105),s=a(5265),i=a(157),n=a.n(i),l=a(4665),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["satin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6362)),"C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\satin\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,1163)),"C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,2874,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\satin\\page.tsx"],m="/satin/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/satin/page",pathname:"/satin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8723:(e,t,a)=>{Promise.resolve().then(a.bind(a,8839))},869:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,3817,23)),Promise.resolve().then(a.t.bind(a,9323,23)),Promise.resolve().then(a.t.bind(a,2204,23)),Promise.resolve().then(a.t.bind(a,820,23)),Promise.resolve().then(a.t.bind(a,5915,23)),Promise.resolve().then(a.t.bind(a,1611,23))},1205:()=>{},785:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(9899),s=a(4175),i=a(6153),n=a(5507);a(24);let l={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function d({children:e,title:t,subtitle:a}){let d=(0,i.usePathname)(),o=(0,i.useRouter)(),[c,m]=(0,n.useState)(null),[x,p]=(0,n.useState)(!1);if(!c)return null;let u=l[c.role]??[],h=(c.ad_soyad||c.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[r.jsx("button",{onClick:()=>p(!x),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>p(!1)}),(0,r.jsxs)("aside",{className:`w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ${x?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[r.jsx("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[r.jsx("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),r.jsx("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:u.map(e=>{let t=d===e.path;return r.jsx(s.default,{href:e.path,className:`flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ${t?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"}`,children:e.name},e.path)})}),(0,r.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white text-xs font-bold",children:h})}),(0,r.jsxs)("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:c.ad_soyad||c.username}),r.jsx("p",{className:"text-xs text-gray-400",children:c.role})]})]}),r.jsx("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),o.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[t&&(0,r.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[a&&r.jsx("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:a}),r.jsx("h1",{className:"text-2xl font-bold",children:t})]}),r.jsx("div",{className:"flex-1 p-8",children:e})]})]})}},895:(e,t,a)=>{"use strict";a.d(t,{a:()=>i});var r=a(5507),s=a(6153);function i(e){(0,s.useRouter)();let[t,a]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!0);return{yetkili:t,yukleniyor:i}}},8839:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(9899),s=a(5507),i=a(785),n=a(895),l=a(24);function d(){let{yetkili:e,yukleniyor:t}=(0,n.a)("/satin");if(t)return r.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[d,o]=(0,s.useState)([]),[c,m]=(0,s.useState)({}),[x,p]=(0,s.useState)([]),[u,h]=(0,s.useState)("tumu"),[g,b]=(0,s.useState)("tumu"),[f,y]=(0,s.useState)(null),k=(e,t)=>{y({tip:e,metin:t}),setTimeout(()=>y(null),3500)},v=["tumu",...Array.from(new Set(d.map(e=>e.hafta))).sort()],j=["tumu",...Array.from(new Set(d.map(e=>e.dersAdi))).sort()];d.filter(e=>("tumu"===u||e.hafta===u)&&("tumu"===g||e.dersAdi===g));let N=async(e,t)=>{if(!e.urunId){k("hata",`"${e.urunAdi}" \xfcr\xfcn\xfc veritabanında bulunamadı.`);return}if(e.depodaMiktar<=0){k("hata","Depoda bu \xfcr\xfcn\xfcn stoğu zaten sıfır.");return}let{error:a}=await l.O.from("urunler").update({stok:0}).eq("id",e.urunId);if(a){k("hata","Stok g\xfcncellenemedi: "+a.message);return}k("basari",`"${e.urunAdi}": depodaki ${e.depodaMiktar} ${e.olcu} stoktan d\xfcş\xfcld\xfc.`),m(t=>{let a=`${e.urunAdi}__${e.marka||""}`;return{...t,[a]:{id:e.urunId,stok:0,kategori:e.kategori}}}),p(e=>e.map((e,a)=>a===t?{...e,dususYapildi:!0,depodaMiktar:0,satinAlinacak:e.listeMiktar}:e))},w=x.reduce((e,t)=>e+t.toplamTutar,0),A=x.reduce((e,t)=>e+t.birimFiyat*t.satinAlinacak,0),S=async()=>{if(0===x.length)return;let e=await a.e(935).then(a.bind(a,9935)),t=x.map(e=>({"\xdcr\xfcn Adı":e.urunAdi,Marka:e.marka||"-",Ölçü:e.olcu,"Liste Miktarı":e.listeMiktar,Depoda:e.depodaMiktar,"Satın Alınacak":e.satinAlinacak,"Birim Fiyat":e.birimFiyat||0,"Satın Alma Tutarı":(e.birimFiyat||0)*e.satinAlinacak})),r=e.utils.json_to_sheet(t),s=e.utils.book_new();e.utils.book_append_sheet(s,r,"Satın Alma");let i="tumu"===u?"Satinalma_Tum":`Satinalma_${u.replace(/\s/g,"_")}`;e.writeFile(s,`${i}.xlsx`)};return r.jsx(i.Z,{title:"Satın Alma Paneli",subtitle:"Haftalık \xfcr\xfcn \xf6zetleri ve stok karşılaştırması",children:(0,r.jsxs)("div",{className:"max-w-6xl space-y-5",children:[f&&r.jsx("div",{className:`text-sm rounded-xl px-4 py-3 border font-medium ${"basari"===f.tip?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-red-50 text-red-600 border-red-200"}`,children:f.metin}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5 flex flex-wrap gap-4 items-end",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Hafta"}),r.jsx("select",{value:u,onChange:e=>h(e.target.value),className:"border border-gray-300 rounded-xl px-4 py-2.5 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500",children:v.map(e=>r.jsx("option",{value:e,children:"tumu"===e?"T\xfcm Haftalar":e},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Ders"}),r.jsx("select",{value:g,onChange:e=>b(e.target.value),className:"border border-gray-300 rounded-xl px-4 py-2.5 text-sm text-black bg-white focus:outline-none focus:ring-2 focus:ring-red-500 min-w-[220px]",children:j.map(e=>r.jsx("option",{value:e,children:"tumu"===e?"T\xfcm Dersler":e},e))})]}),(0,r.jsxs)("div",{className:"ml-auto flex items-end gap-3",children:[r.jsx("button",{type:"button",onClick:()=>{if(0===x.length)return;let e={};x.forEach(t=>{let a=t.kategori||"Diger";e[a]||(e[a]=[]),e[a].push(t)});let t="tumu"===u?"Tum Haftalar":u,a="tumu"===g?"Tum Dersler":g,r=new Date().toLocaleDateString("tr-TR"),s='<!DOCTYPE html><html><head><meta charset="UTF-8"><style>body{font-family:Arial,sans-serif;font-size:11px;margin:20px;color:#222}h1{font-size:14px;color:#8B0000;border-bottom:2px solid #8B0000;padding-bottom:6px;margin-bottom:4px}.meta{font-size:10px;color:#666;margin-bottom:16px}.kat{background:#f3f4f6;font-size:10px;font-weight:bold;text-transform:uppercase;letter-spacing:.05em;color:#555;padding:6px 8px;margin-top:14px;border-left:3px solid #8B0000}table{width:100%;border-collapse:collapse;margin-top:4px}th{background:#8B0000;color:white;padding:5px 8px;font-size:10px;text-align:left}td{padding:5px 8px;border-bottom:1px solid #eee;font-size:10px}tr:nth-child(even) td{background:#fafafa}.s{color:#059669;font-weight:bold}.d{color:#d97706}.y{color:#aaa}.footer{margin-top:20px;font-size:9px;color:#aaa;border-top:1px solid #eee;padding-top:6px}@media print{body{margin:10px}}</style></head><body>';s+=`<h1>Satin Alma Listesi — ${t}</h1><div class="meta">${a} | ${r}</div>`,Object.entries(e).forEach(([e,t])=>{s+=`<div class="kat">${e} (${t.length} urun)</div><table><thead><tr><th>Urun</th><th>Marka</th><th>Satin Alinacak</th><th>B.Fiyat</th></tr></thead><tbody>`,t.forEach(e=>{let t=e.satinAlinacak>0?`<span class="s">${e.satinAlinacak} ${e.olcu}</span>`:'<span class="y">Depoda yeterli</span>';e.depodaMiktar>0&&(e.depodaMiktar,e.olcu),s+=`<tr><td>${e.urunAdi}</td><td>${e.marka||"—"}</td><td>${t}</td><td>${e.birimFiyat>0?"₺"+e.birimFiyat.toFixed(2):"—"}</td></tr>`}),s+="</tbody></table>"});let i=x.reduce((e,t)=>e+t.birimFiyat*t.satinAlinacak,0);s+=`<div style="margin-top:16px;text-align:right;font-size:12px;font-weight:bold;border-top:2px solid #8B0000;padding-top:8px;color:#8B0000;">TOPLAM: ₺${i.toLocaleString("tr-TR",{minimumFractionDigits:2})}</div><div class="footer">IRUFoodFlow | ${r}</div></body></html>`;let n=window.open("","_blank");n&&(n.document.write(s),n.document.close(),n.focus(),setTimeout(()=>{n.print()},400))},disabled:0===x.length,className:"bg-red-700 hover:bg-red-800 text-white text-sm font-semibold px-5 py-2.5 rounded-xl transition disabled:opacity-40",children:"PDF"}),r.jsx("button",{type:"button",onClick:S,disabled:0===x.length,className:"bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-semibold px-5 py-2.5 rounded-xl transition disabled:opacity-40",children:"Excel"})]})]}),x.length>0&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5 text-center",children:[r.jsx("p",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider mb-1",children:"Liste Toplamı"}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:w>0?`₺${w.toLocaleString("tr-TR",{minimumFractionDigits:2})}`:"—"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-sm p-5 text-center",children:[r.jsx("p",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider mb-1",children:"Satın Alınacak Tutar"}),r.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:A>0?`₺${A.toLocaleString("tr-TR",{minimumFractionDigits:2})}`:"—"})]})]}),r.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:0===x.length?r.jsx("div",{className:"py-20 text-center text-gray-400 text-sm",children:0===d.length?"Hen\xfcz sipariş bulunmuyor.":"Bu filtreye uygun veri yok."}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100 text-left",children:[r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"\xdcR\xdcN"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"MARKA"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"LİSTE MİKT."}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-amber-600 uppercase tracking-wider",children:"DEPODA"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-emerald-600 uppercase tracking-wider",children:"SATIN ALINACAK"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"B.FİYAT"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"İŞLEM"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50",children:(()=>{let e={};return x.forEach((t,a)=>{let r=t.kategori||"Diger";e[r]||(e[r]=[]),e[r].push({satir:t,idx:a})}),Object.entries(e).flatMap(([e,t])=>[r.jsx("tr",{className:"bg-gray-100 border-t-2 border-gray-200",children:(0,r.jsxs)("td",{colSpan:7,className:"px-4 py-2",children:[r.jsx("span",{className:"text-xs font-bold text-gray-600 uppercase tracking-wider",children:e}),(0,r.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["(",t.length," \xfcr\xfcn)"]})]})},`kat-${e}`),...t.map(({satir:e,idx:t})=>(0,r.jsxs)("tr",{className:`hover:bg-gray-50 transition-colors ${e.dususYapildi?"bg-emerald-50":""}`,children:[r.jsx("td",{className:"px-4 py-3.5 font-medium text-gray-800",children:e.urunAdi}),r.jsx("td",{className:"px-4 py-3.5 text-gray-500",children:e.marka||"—"}),(0,r.jsxs)("td",{className:"px-4 py-3.5 text-gray-700 font-medium",children:[e.listeMiktar," ",e.olcu]}),r.jsx("td",{className:"px-4 py-3.5",children:r.jsx("span",{className:`font-semibold ${e.depodaMiktar>0?"text-amber-600":"text-gray-400"}`,children:e.depodaMiktar>0?`${e.depodaMiktar} ${e.olcu}`:"—"})}),r.jsx("td",{className:"px-4 py-3.5",children:r.jsx("span",{className:`font-bold text-base ${e.satinAlinacak>0?"text-emerald-700":"text-gray-400"}`,children:e.satinAlinacak>0?`${e.satinAlinacak} ${e.olcu}`:"Depoda yeterli"})}),r.jsx("td",{className:"px-4 py-3.5 text-gray-500",children:e.birimFiyat>0?`₺${e.birimFiyat.toLocaleString("tr-TR",{minimumFractionDigits:2})}`:"—"}),r.jsx("td",{className:"px-4 py-3.5",children:e.dususYapildi?r.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:"D\xfcş\xfcld\xfc"}):e.depodaMiktar>0?r.jsx("button",{onClick:()=>N(e,t),className:"text-xs bg-orange-50 hover:bg-orange-100 text-orange-700 font-medium px-3 py-1.5 rounded-lg transition whitespace-nowrap",children:"Stoktan D\xfcş"}):r.jsx("span",{className:"text-xs text-gray-400",children:"Stok yok"})})]},t))])})()})]})})]})})}},24:(e,t,a)=>{"use strict";a.d(t,{O:()=>r});let r=(0,a(7994).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")},1163:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,metadata:()=>n});var r=a(5023),s=a(1695),i=a.n(s);a(642);let n={title:"IRU FoodFlow",description:"Okul yemek talep y\xf6netim sistemi"};function l({children:e}){return r.jsx("html",{lang:"tr",children:r.jsx("body",{className:`${i().variable} antialiased`,children:e})})}},6362:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=a(2772);let s=(0,r.createProxy)(String.raw`C:\Users\enisa\Desktop\irufoodflow4-dev\app\satin\page.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let l=(0,r.createProxy)(String.raw`C:\Users\enisa\Desktop\irufoodflow4-dev\app\satin\page.tsx#default`)},7418:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(1645);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},642:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[916,617,645,524,175],()=>a(4126));module.exports=r})();