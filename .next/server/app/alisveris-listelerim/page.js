(()=>{var e={};e.id=509,e.ids=[509],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},8888:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),a(9172),a(1163),a(2874);var r=a(7105),s=a(5265),l=a(157),i=a.n(l),n=a(4665),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["alisveris-listelerim",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9172)),"C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\alisveris-listelerim\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,1163)),"C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,2874,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\enisa\\Desktop\\irufoodflow4-dev\\app\\alisveris-listelerim\\page.tsx"],m="/alisveris-listelerim/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/alisveris-listelerim/page",pathname:"/alisveris-listelerim",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5117:(e,t,a)=>{Promise.resolve().then(a.bind(a,4988))},869:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,3817,23)),Promise.resolve().then(a.t.bind(a,9323,23)),Promise.resolve().then(a.t.bind(a,2204,23)),Promise.resolve().then(a.t.bind(a,820,23)),Promise.resolve().then(a.t.bind(a,5915,23)),Promise.resolve().then(a.t.bind(a,1611,23))},1205:()=>{},4988:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(9899),s=a(5507),l=a(785),i=a(895),n=a(24);let d=Array.from({length:10},(e,t)=>`${t+1}. Hafta`);function o(){let{yetkili:e,yukleniyor:t}=(0,i.a)("/alisveris-listelerim");if(t)return r.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Y\xfckleniyor..."});if(!e)return null;let[o,c]=(0,s.useState)(null),[m,x]=(0,s.useState)(""),[u,h]=(0,s.useState)([]),[p,b]=(0,s.useState)([]),[g,f]=(0,s.useState)(""),[y,j]=(0,s.useState)("1. Hafta"),[v,N]=(0,s.useState)(""),[w,k]=(0,s.useState)({}),[S,_]=(0,s.useState)({}),[C,L]=(0,s.useState)(null),[A,$]=(0,s.useState)({}),[z,T]=(0,s.useState)("liste-olustur"),[D,I]=(0,s.useState)(null),[E,P]=(0,s.useState)({}),[F,R]=(0,s.useState)({});(0,s.useRef)({});let[M,q]=(0,s.useState)(!1),[O,U]=(0,s.useState)([]),[H,K]=(0,s.useState)(""),[G,Y]=(0,s.useState)(1),[Z,B]=(0,s.useState)(!1),J=(e,t)=>{L({tip:e,metin:t}),setTimeout(()=>L(null),3500)},X=u.find(e=>e.id===g),V=p.filter(e=>!v||e.urunAdi.toLowerCase().includes(v.toLowerCase())||e.marka.toLowerCase().includes(v.toLowerCase())),Q=e=>{let t=e.toLowerCase();return"kg"===t||"l"===t?{serbest:!0,baslangic:0,adim:0}:"g"===t||"ml"===t?{serbest:!1,baslangic:50,adim:50}:{serbest:!1,baslangic:1,adim:1}},W=(e,t)=>{if(t){let{baslangic:t}=Q(e.olcu);k(a=>({...a,[e.id]:t})),Q(e.olcu).serbest&&_(t=>({...t,[e.id]:""}))}else k(t=>{let a={...t};return delete a[e.id],a}),_(t=>{let a={...t};return delete a[e.id],a})},ee=(e,t)=>{if(et(t)){_(a=>({...a,[e]:t}));let a=parseFloat(t.replace(",","."));k(t=>({...t,[e]:a}))}else console.warn("Invalid float input for kilograms")},et=e=>{let t=parseFloat(e.replace(",","."));return!isNaN(t)&&isFinite(t)&&t>=0},ea=e=>{let{adim:t,baslangic:a}=Q(e.olcu),r=w[e.id]||a;k(a=>({...a,[e.id]:Math.round((r+t)*1e3)/1e3}))},er=e=>{let{adim:t,baslangic:a}=Q(e.olcu),r=Math.round(((w[e.id]||a)-t)*1e3)/1e3;r<=0?k(t=>{let a={...t};return delete a[e.id],a}):k(t=>({...t,[e.id]:r}))},es=(e,t)=>{let a=Math.round(1e3*t)/1e3;a<=0?k(t=>{let a={...t};return delete a[e],a}):k(t=>({...t,[e]:a}))},el=Object.entries(w).filter(([,e])=>e>0).map(([e,t])=>{let a=p.find(t=>t.id===e);return a?{urunId:e,urunAdi:a.urunAdi,marka:a.marka,miktar:t,olcu:a.olcu,birimFiyat:a.fiyat,toplam:a.fiyat*t}:null}).filter(Boolean),ei=el.reduce((e,t)=>e+t.toplam,0),en=async()=>{if(!g){J("hata","\xd6nce ders se\xe7in.");return}if(0===O.length){let{data:e}=await n.O.from("receteler").select("id, ad, kategori, porsiyon").eq("aktif",!0).order("ad");U(e||[])}K(""),Y(1),q(!0)},ed=async()=>{if(!H){J("hata","Re\xe7ete se\xe7in.");return}if(G<1){J("hata","\xd6ğrenci sayısı en az 1 olmalı.");return}B(!0);let{data:e}=await n.O.from("recete_malzemeleri").select("*").eq("recete_id",H);if(!e||0===e.length){J("hata","Bu re\xe7etede malzeme tanımlanmamış."),B(!1);return}let t={...w},a=0;for(let r of e){let e=Math.round(r.miktar_kisi*G*1e3)/1e3,s=p.find(e=>e.urunAdi.toLowerCase().includes(r.urun_adi.toLowerCase())||r.urun_adi.toLowerCase().includes(e.urunAdi.toLowerCase()));s&&(t[s.id]=(t[s.id]||0)+e,a++)}k(t),q(!1),B(!1),J("basari",`${a}/${e.length} malzeme listeye eklendi. Eşleşmeyenler manuel eklenebilir.`)},eo=async()=>{if(!g){J("hata","Lutfen ders secin.");return}if(0===el.length){J("hata","En az bir urun secin.");return}if(!o||!X)return;let{data:e}=await n.O.from("siparisler").select("id").eq("ogretmen_id",o).eq("ders_id",g).eq("hafta",y).single();e?await n.O.from("siparisler").update({urunler:el,genel_toplam:ei}).eq("id",e.id):await n.O.from("siparisler").insert({ogretmen_id:o,ogretmen_adi:m,ders_id:g,ders_adi:`${X.kod} - ${X.ad}`,hafta:y,urunler:el,genel_toplam:ei,tarih:new Date().toLocaleDateString("tr-TR"),durum:"bekliyor"}),$(e=>({...e,[g]:{...e[g]||{dersId:g,dersAdi:X.ad,dersKodu:X.kod,ogretmenAdi:m,olusturmaTarihi:new Date().toLocaleDateString("tr-TR"),haftalar:{}},haftalar:{...e[g]?.haftalar||{},[y]:el}}})),J("basari",`${y} listesi kaydedildi!`)},ec=async e=>{let t=A[e];if(!t)return;let r=await a.e(935).then(a.bind(a,9935)),s=r.utils.book_new();d.forEach(e=>{let a=t.haftalar[e]||[],l=[[`${t.dersKodu} - ${t.dersAdi} MALZEME TALEP LISTESI`,"","","","","","",""],["","","","","","","",""],["Sira no","Urun","Marka","Miktar","Olcu","B.Fiyat","Toplam"],...a.map((e,t)=>[t+1,e.urunAdi,e.marka,e.miktar,e.olcu,e.birimFiyat,e.toplam])],i=r.utils.aoa_to_sheet(l);i["!cols"]=[{wch:8},{wch:35},{wch:20},{wch:10},{wch:8},{wch:12},{wch:12}],r.utils.book_append_sheet(s,i,e)});let l=[[`${t.dersKodu} - ${t.dersAdi}`,"",""],[`Ogretmen: ${t.ogretmenAdi}`,"",""],["","",""],["Hafta","Urun Sayisi","Toplam Tutar (TL)"]],i=0;d.forEach(e=>{let a=t.haftalar[e]||[],r=a.reduce((e,t)=>e+t.toplam,0);i+=r,l.push([e,a.length,r>0?r:0])}),l.push(["","",""]),l.push(["GENEL TOPLAM","",i]);let n=r.utils.aoa_to_sheet(l);n["!cols"]=[{wch:15},{wch:15},{wch:20}],r.utils.book_append_sheet(s,n,"Genel Ozet"),r.writeFile(s,`${t.dersKodu}_Malzeme_Talep_Listesi.xlsx`)},em=e=>{let t=A[e];if(!t)return;let a='<!DOCTYPE html><html><head><meta charset="UTF-8"><style>body{font-family:Arial,sans-serif;font-size:11px}.sayfa{page-break-after:always;padding:20px}.baslik{text-align:center;font-size:13px;font-weight:bold;border:2px solid #8B0000;padding:10px;margin-bottom:8px}table{width:100%;border-collapse:collapse}th{background:#8B0000;color:white;padding:6px 8px;font-size:10px}td{padding:5px 8px;border-bottom:1px solid #eee;font-size:10px}</style></head><body>';d.forEach(e=>{let r=t.haftalar[e]||[];a+=`<div class="sayfa"><div class="baslik">${t.dersKodu} - ${t.dersAdi}<br>MALZEME TALEP LISTESI - ${e}</div><table><thead><tr><th>Sira</th><th>Urun</th><th>Marka</th><th>Miktar</th><th>Olcu</th><th>Toplam</th></tr></thead><tbody>`,0===r.length?a+='<tr><td colspan="6" style="text-align:center;color:#999;">Bu hafta icin urun girilmemis.</td></tr>':r.forEach((e,t)=>{a+=`<tr><td>${t+1}</td><td>${e.urunAdi}</td><td>${e.marka||"-"}</td><td>${e.miktar}</td><td>${e.olcu}</td><td>${e.toplam>0?e.toplam.toFixed(2)+" TL":"-"}</td></tr>`}),a+="</tbody></table></div>"}),a+="</body></html>";let r=window.open("","_blank");r&&(r.document.write(a),r.document.close(),r.focus(),setTimeout(()=>{r.print()},500))},ex=async e=>{let t=u.find(t=>t.id===e);if(!t)return;let r=await a.e(935).then(a.bind(a,9935)),s=r.utils.book_new();d.forEach(e=>{let t=r.utils.aoa_to_sheet([["urunId","urunAdi","marka","miktar","olcu","birimFiyat","toplam"],["","Domates","Pınar",2,"kg",15,30],["","Zeytinyağı","Komili",500,"ml",.05,25]]);t["!cols"]=[{wch:10},{wch:30},{wch:20},{wch:10},{wch:8},{wch:12},{wch:12}],r.utils.book_append_sheet(s,t,e)}),r.writeFile(s,`${t.kod}_Sablon.xlsx`)},eu=async(e,t)=>{let r=u.find(t=>t.id===e);if(r&&o){R(t=>({...t,[e]:!0}));try{let s=await t.arrayBuffer(),l=await a.e(935).then(a.bind(a,9935)),i=l.read(s,{type:"array"});for(let t of d){let a=i.Sheets[t];if(!a)continue;let s=l.utils.sheet_to_json(a,{header:1}).slice(1).filter(e=>e[1]);if(0===s.length)continue;let d=s.map(e=>{let t=parseFloat(String(e[3]).replace(",","."))||0,a=parseFloat(String(e[5]).replace(",","."))||0;return{urunId:String(e[0]||""),urunAdi:String(e[1]||""),marka:String(e[2]||""),miktar:t,olcu:String(e[4]||""),birimFiyat:a,toplam:parseFloat((t*a).toFixed(2))}}),c=d.reduce((e,t)=>e+t.toplam,0),{data:x}=await n.O.from("siparisler").select("id").eq("ogretmen_id",o).eq("ders_id",e).eq("hafta",t).single();x?await n.O.from("siparisler").update({urunler:d,genel_toplam:c}).eq("id",x.id):await n.O.from("siparisler").insert({ogretmen_id:o,ogretmen_adi:m,ders_id:e,ders_adi:`${r.kod} - ${r.ad}`,hafta:t,urunler:d,genel_toplam:c,tarih:new Date().toLocaleDateString("tr-TR"),durum:"bekliyor"}),$(a=>({...a,[e]:{...a[e]||{dersId:e,dersAdi:r.ad,dersKodu:r.kod,ogretmenAdi:m,olusturmaTarihi:new Date().toLocaleDateString("tr-TR"),haftalar:{}},haftalar:{...a[e]?.haftalar||{},[t]:d}}}))}J("basari",`${r.kod} şablon verisi başarıyla y\xfcklendi!`)}catch(e){console.error("Şablon y\xfckleme hatası:",e),J("hata","Şablon y\xfcklenirken hata oluştu. Dosya formatını kontrol edin.")}finally{R(t=>({...t,[e]:!1})),P(t=>{let a={...t};return delete a[e],a})}}},eh=e=>{let t=A[e];return t?d.filter(e=>(t.haftalar[e]||[]).length>0).length:0};return(0,r.jsxs)(l.Z,{title:"Alisveris Listelerim",subtitle:"10 haftalik malzeme talep listesi olusturun",children:[(0,r.jsxs)("div",{className:"max-w-7xl space-y-5",children:[C&&r.jsx("div",{className:`text-sm rounded-xl px-4 py-3 border font-medium ${"basari"===C.tip?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-red-50 text-red-600 border-red-200"}`,children:C.metin}),r.jsx("div",{className:"flex gap-2 items-center",children:[{key:"liste-olustur",label:"Liste Olustur"},{key:"listelerim",label:"Listelerim ve Indir"}].map(e=>r.jsx("button",{onClick:()=>T(e.key),className:`px-5 py-3 rounded-xl text-sm font-semibold transition ${z===e.key?"bg-red-700 text-white":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:e.label},e.key))}),"liste-olustur"===z&&(0,r.jsxs)("div",{className:"space-y-5",children:[r.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"Ders *"}),(0,r.jsxs)("select",{value:g,onChange:e=>{f(e.target.value),j("1. Hafta")},className:`w-full border rounded-xl px-4 py-3 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-red-500 ${g?"border-gray-200":"border-red-300"}`,children:[r.jsx("option",{value:"",children:"DERS SECINIZ..."}),u.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.kod," - ",e.ad]},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"Hafta Secimi"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(e=>{let t=g&&(A[g]?.haftalar[e]||[]).length>0;return(0,r.jsxs)("button",{onClick:()=>j(e),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition border ${y===e?"bg-red-700 text-white border-red-700":t?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-500 border-gray-200"}`,children:[e.replace(". Hafta",".")," ",t&&y!==e?"v":""]},e)})})]})]})}),(0,r.jsxs)("div",{className:"flex gap-5",children:[r.jsx("div",{className:"flex-1 bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"font-semibold text-gray-800 text-sm",children:["Urun Havuzu — ",y]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:en,className:"bg-amber-500 hover:bg-amber-600 text-white text-xs font-semibold px-3 py-2 rounded-xl transition whitespace-nowrap",children:"\uD83C\uDF7D Re\xe7eteden Ekle"}),r.jsx("input",{value:v,onChange:e=>N(e.target.value),placeholder:"Urun ara...",className:"border border-gray-200 rounded-xl px-4 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-red-500 w-48"})]}),(0,r.jsxs)("div",{className:"mx-4 mt-4 mb-1 bg-blue-50 border border-blue-100 rounded-xl px-4 py-3",children:[r.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-2",children:"Miktar Giris Rehberi"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-1.5 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-mono bg-white border border-blue-200 px-1.5 py-0.5 rounded text-blue-800 whitespace-nowrap",children:"Kg / L"}),(0,r.jsxs)("span",{className:"text-gray-500",children:["Istediginiz degeri elle girin — orn: ",r.jsx("b",{children:"0,100"})," \xb7 ",r.jsx("b",{children:"1,500"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-mono bg-white border border-blue-200 px-1.5 py-0.5 rounded text-blue-800 whitespace-nowrap",children:"G / Ml"}),(0,r.jsxs)("span",{className:"text-gray-500",children:["+ / - ile ",r.jsx("b",{children:"50'ser"})," artir/azalt"]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-mono bg-white border border-blue-200 px-1.5 py-0.5 rounded text-blue-800 whitespace-nowrap",children:"Adet"}),(0,r.jsxs)("span",{className:"text-gray-500",children:["+ / - ile ",r.jsx("b",{children:"1'er"})," artir/azalt"]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-mono bg-white border border-blue-200 px-1.5 py-0.5 rounded text-blue-800 whitespace-nowrap",children:"Paket / Kutu"}),(0,r.jsxs)("span",{className:"text-gray-500",children:["+ / - ile ",r.jsx("b",{children:"1'er"})," artir/azalt"]})]})]})]}),0===p.length?r.jsx("div",{className:"py-16 text-center text-gray-400 text-sm",children:"Urun havuzu bos."}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100 text-left",children:[r.jsx("th",{className:"px-4 py-3 w-10 text-xs font-semibold text-gray-500",children:"SEC"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"URUN"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"MARKA"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"B.FIYAT"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"MIKTAR"}),r.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"TOPLAM"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50",children:V.map(e=>{let t=e.id in w,a=w[e.id]??0,s=Q(e.olcu);return(0,r.jsxs)("tr",{className:`transition-colors ${t?"bg-red-50":"hover:bg-gray-50"}`,children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"checkbox",checked:t,onChange:t=>W(e,t.target.checked),className:"w-4 h-4 accent-red-600 cursor-pointer"})}),(0,r.jsxs)("td",{className:"px-4 py-3",children:[r.jsx("p",{className:"font-medium text-gray-800",children:e.urunAdi}),e.kategori&&r.jsx("p",{className:"text-xs text-gray-400",children:e.kategori}),e.stok>0?(0,r.jsxs)("p",{className:"text-xs text-emerald-600 font-medium",children:["Depoda: ",e.stok," ",e.olcu]}):r.jsx("p",{className:"text-xs text-gray-400",children:"Depoda stok yok"})]}),r.jsx("td",{className:"px-4 py-3 text-gray-500",children:e.marka||"-"}),r.jsx("td",{className:"px-4 py-3 text-gray-700 font-medium",children:e.fiyat>0?`${e.fiyat.toLocaleString("tr-TR",{minimumFractionDigits:2})} TL/${e.olcu}`:"-"}),r.jsx("td",{className:"px-4 py-3",children:t?s.serbest?(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("input",{type:"text",inputMode:"decimal",value:void 0!==S[e.id]?S[e.id]:a>0?String(a).replace(".",","):"",placeholder:"orn: 1,500",onChange:t=>ee(e.id,t.target.value),className:`w-24 border rounded-lg px-2 py-1.5 text-sm text-center focus:outline-none focus:ring-2 focus:ring-red-500 ${a>0?"border-gray-300":"border-red-300 bg-red-50 placeholder-red-300"}`}),r.jsx("span",{className:"text-xs font-medium text-gray-500",children:e.olcu})]}):(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("button",{type:"button",onClick:()=>er(e),className:"w-7 h-7 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-600 font-bold text-sm transition",children:"-"}),r.jsx("input",{type:"number",value:a||"",step:s.adim,min:s.baslangic,onChange:t=>es(e.id,Number(t.target.value)),className:"w-14 border border-gray-200 rounded-lg px-1 py-1 text-sm text-center focus:outline-none focus:ring-2 focus:ring-red-500"}),r.jsx("span",{className:"text-xs text-gray-400",children:e.olcu}),r.jsx("button",{type:"button",onClick:()=>ea(e),className:"w-7 h-7 flex items-center justify-center bg-red-100 hover:bg-red-200 rounded-lg text-red-700 font-bold text-sm transition",children:"+"})]}):r.jsx("span",{className:"text-gray-300",children:"-"})}),r.jsx("td",{className:"px-4 py-3 font-semibold text-gray-800",children:t&&a>0&&e.fiyat>0?`${(e.fiyat*a).toLocaleString("tr-TR",{minimumFractionDigits:2})} TL`:"-"})]},e.id)})})]})})]})}),r.jsx("div",{className:"w-72 flex-shrink-0",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-5 sticky top-4 space-y-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800 text-sm",children:[y," Ozeti",(0,r.jsxs)("span",{className:"ml-2 text-xs font-normal text-gray-400",children:["(",el.length," urun)"]})]}),0===el.length?r.jsx("p",{className:"text-gray-400 text-xs text-center py-4",children:"Henuz urun secilmedi."}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"space-y-1.5 max-h-60 overflow-y-auto",children:el.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-start text-xs py-1.5 border-b border-gray-50",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:e.urunAdi}),(0,r.jsxs)("p",{className:"text-gray-400",children:[e.miktar," ",e.olcu]})]}),r.jsx("span",{className:"text-gray-600 font-medium ml-2",children:e.toplam>0?`${e.toplam.toFixed(2)} TL`:"-"})]},e.urunId))}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-3 flex justify-between text-sm",children:[r.jsx("span",{className:"font-semibold text-gray-700",children:"Hafta Toplami"}),(0,r.jsxs)("span",{className:"font-bold text-red-700",children:[ei.toLocaleString("tr-TR",{minimumFractionDigits:2})," TL"]})]})]}),(0,r.jsxs)("button",{type:"button",onClick:eo,disabled:!g,className:"w-full bg-red-700 hover:bg-red-800 text-white text-sm font-semibold py-3 rounded-xl transition disabled:opacity-40",children:[y," Listesini Kaydet"]})]})})]})]}),"listelerim"===z&&r.jsx("div",{className:"space-y-5",children:0===u.length?r.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-16 text-center text-gray-400 text-sm",children:"Atanmis ders bulunamadi."}):u.map(e=>{let t=A[e.id],a=eh(e.id),s=t?d.reduce((e,a)=>e+(t.haftalar[a]||[]).reduce((e,t)=>e+t.toplam,0),0):0;return(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 flex items-center justify-between border-b border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs font-bold bg-red-100 text-red-700 px-2.5 py-1 rounded-lg",children:e.kod}),r.jsx("h3",{className:"font-bold text-gray-800",children:e.ad})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[a,"/10 hafta"]}),s>0&&(0,r.jsxs)("p",{className:"text-sm font-bold text-red-700",children:[s.toLocaleString("tr-TR",{minimumFractionDigits:2})," TL"]})]}),t&&a>0?(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>ec(e.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-semibold px-4 py-2.5 rounded-xl transition",children:"Excel"}),r.jsx("button",{onClick:()=>em(e.id),className:"bg-red-700 hover:bg-red-800 text-white text-sm font-semibold px-4 py-2.5 rounded-xl transition",children:"PDF"}),r.jsx("button",{onClick:()=>ex(e.id),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold px-4 py-2.5 rounded-xl transition",title:"Doldurulabilir Excel şablonu indir",children:"Şablon İndir"}),(0,r.jsxs)("label",{className:`flex items-center gap-1 text-sm font-semibold px-4 py-2.5 rounded-xl transition cursor-pointer ${F[e.id]?"bg-gray-200 text-gray-400":"bg-amber-500 hover:bg-amber-600 text-white"}`,title:"Doldurduğun şablonu y\xfckle",children:[F[e.id]?"Y\xfckleniyor…":"Excel Y\xfckle",r.jsx("input",{type:"file",accept:".xlsx",className:"hidden",disabled:F[e.id],onChange:t=>{let a=t.target.files?.[0];a&&eu(e.id,a),t.target.value=""}})]})]}):(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[r.jsx("button",{onClick:()=>{f(e.id),T("liste-olustur")},className:"text-sm text-red-600 font-medium hover:underline",children:"Liste oluştur →"}),r.jsx("button",{onClick:()=>ex(e.id),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold px-3 py-2 rounded-xl transition",title:"Doldurulabilir Excel şablonu indir",children:"Şablon İndir"}),(0,r.jsxs)("label",{className:`flex items-center gap-1 text-sm font-semibold px-3 py-2 rounded-xl transition cursor-pointer ${F[e.id]?"bg-gray-200 text-gray-400":"bg-amber-500 hover:bg-amber-600 text-white"}`,title:"Doldurduğun şablonu y\xfckle",children:[F[e.id]?"Y\xfckleniyor…":"Şablon ↑",r.jsx("input",{type:"file",accept:".xlsx",className:"hidden",disabled:F[e.id],onChange:t=>{let a=t.target.files?.[0];a&&eu(e.id,a),t.target.value=""}})]})]})]})]}),r.jsx("div",{className:"px-6 py-4",children:r.jsx("div",{className:"grid grid-cols-5 lg:grid-cols-10 gap-2",children:d.map(a=>{let s=t?.haftalar[a]||[],l=s.reduce((e,t)=>e+t.toplam,0);return(0,r.jsxs)("button",{onClick:()=>{f(e.id),j(a),T("liste-olustur")},className:`p-2 rounded-xl border text-center text-xs transition ${s.length>0?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-gray-50 border-gray-200 text-gray-400"}`,children:[r.jsx("p",{className:"font-bold",children:a.replace(". Hafta",".")}),r.jsx("p",{className:"text-xs mt-0.5",children:s.length>0?`${l.toLocaleString("tr-TR",{maximumFractionDigits:0})} TL`:"-"})]},a)})})})]},e.id)})})]}),M&&r.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"\uD83C\uDF7D Re\xe7eteden Ekle"}),r.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600 text-xl font-bold",children:"✕"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Re\xe7ete Se\xe7in"}),(0,r.jsxs)("select",{value:H,onChange:e=>K(e.target.value),className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500",children:[r.jsx("option",{value:"",children:"-- Re\xe7ete se\xe7in --"}),O.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.ad," (",e.kategori,")"]},e.id))]}),0===O.length&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Hen\xfcz re\xe7ete eklenmemiş. Re\xe7ete Havuzu'ndan ekleyebilirsiniz."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"\xd6ğrenci Sayısı"}),r.jsx("input",{type:"number",min:1,value:G,onChange:e=>Y(Number(e.target.value)),className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),(0,r.jsxs)("div",{className:"bg-amber-50 border border-amber-100 rounded-xl px-4 py-3 text-xs text-amber-700",children:["Re\xe7etedeki malzemeler, \xf6ğrenci sayısıyla \xe7arpılarak mevcut listeye ",r.jsx("strong",{children:"eklenir"}),". \xdcr\xfcn havuzunda eşleşen \xfcr\xfcnler otomatik işaretlenir."]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-1",children:[r.jsx("button",{onClick:()=>q(!1),className:"flex-1 border border-gray-300 text-gray-700 text-sm font-medium py-2.5 rounded-xl hover:bg-gray-50 transition",children:"İptal"}),r.jsx("button",{onClick:ed,disabled:Z||!H,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white text-sm font-semibold py-2.5 rounded-xl transition disabled:opacity-50",children:Z?"Ekleniyor...":"Listeye Ekle"})]})]})]})})]})}},785:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(9899),s=a(4175),l=a(6153),i=a(5507);a(24);let n={admin:[{name:" Ana Sayfa",path:"/admin"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Kullanıcılar",path:"/kullanicilar"},{name:" Dersler",path:"/dersler"},{name:" Alışveriş Listeleri",path:"/siparisler"},{name:" Sipariş Y\xf6netimi",path:"/siparis-yonetimi"}],ogretmen:[{name:" Ana Sayfa",path:"/ogretmen"},{name:" \xdcr\xfcn Havuzu",path:"/urun-havuzu"},{name:" Re\xe7ete Havuzu",path:"/receteler"},{name:" Alışveriş Listelerim",path:"/alisveris-listelerim"},{name:" Siparişlerim",path:"/siparislerim"},{name:" Talep Oluştur",path:"/talep"}],satin_alma:[{name:" Ana Sayfa",path:"/satin"}],stok:[{name:" Ana Sayfa",path:"/stok"}],bolum_baskani:[{name:" Ana Sayfa",path:"/bolum-baskani"},{name:" Ders Y\xf6netimi",path:"/dersler"}]};function d({children:e,title:t,subtitle:a}){let d=(0,l.usePathname)(),o=(0,l.useRouter)(),[c,m]=(0,i.useState)(null),[x,u]=(0,i.useState)(!1);if(!c)return null;let h=n[c.role]??[],p=(c.ad_soyad||c.username).split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[r.jsx("button",{onClick:()=>u(!x),className:"lg:hidden fixed top-4 right-4 z-50 bg-red-700 text-white p-3 rounded-lg shadow-lg",children:""}),x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>u(!1)}),(0,r.jsxs)("aside",{className:`w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0 fixed lg:static h-screen z-40 transition-transform duration-300 ${x?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[r.jsx("div",{className:"px-6 py-5 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[r.jsx("div",{className:"w-8 h-8 bg-red-700 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white text-xs font-bold",children:"İR\xdc"})}),r.jsx("span",{className:"font-bold text-gray-800",children:"İR\xdcFoodFlow"})]})}),r.jsx("nav",{className:"flex-1 px-3 py-4 space-y-0.5",children:h.map(e=>{let t=d===e.path;return r.jsx(s.default,{href:e.path,className:`flex items-center px-4 py-2.5 rounded-xl text-sm transition-all ${t?"bg-red-50 text-red-700 font-semibold":"text-gray-500 hover:bg-gray-100 hover:text-gray-800"}`,children:e.name},e.path)})}),(0,r.jsxs)("div",{className:"px-4 py-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-9 h-9 bg-red-700 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white text-xs font-bold",children:p})}),(0,r.jsxs)("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:c.ad_soyad||c.username}),r.jsx("p",{className:"text-xs text-gray-400",children:c.role})]})]}),r.jsx("button",{onClick:()=>{localStorage.removeItem("aktifKullaniciId"),localStorage.removeItem("role"),localStorage.removeItem("username"),o.push("/")},className:"w-full text-sm text-red-600 hover:text-red-700 font-medium py-2 rounded-xl hover:bg-red-50 transition",children:"\xc7ıkış Yap"})]})]}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col overflow-auto pt-16 lg:pt-0",children:[t&&(0,r.jsxs)("div",{className:"bg-red-700 text-white px-10 py-7 flex-shrink-0",children:[a&&r.jsx("p",{className:"text-red-300 text-xs font-medium uppercase tracking-widest mb-1",children:a}),r.jsx("h1",{className:"text-2xl font-bold",children:t})]}),r.jsx("div",{className:"flex-1 p-8",children:e})]})]})}},895:(e,t,a)=>{"use strict";a.d(t,{a:()=>l});var r=a(5507),s=a(6153);function l(e){(0,s.useRouter)();let[t,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(!0);return{yetkili:t,yukleniyor:l}}},24:(e,t,a)=>{"use strict";a.d(t,{O:()=>r});let r=(0,a(7994).eI)("https://dyqbddyenmrzjjhkperf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cWJkZHllbm1yempqaGtwZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzU1MjcsImV4cCI6MjA4NzQ1MTUyN30.D83dK9y-GkVLYmfon94afTNGaffiZ1S1TCNy5Ug-Io4")},9172:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var r=a(2772);let s=(0,r.createProxy)(String.raw`C:\Users\enisa\Desktop\irufoodflow4-dev\app\alisveris-listelerim\page.tsx`),{__esModule:l,$$typeof:i}=s;s.default;let n=(0,r.createProxy)(String.raw`C:\Users\enisa\Desktop\irufoodflow4-dev\app\alisveris-listelerim\page.tsx#default`)},1163:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,metadata:()=>i});var r=a(5023),s=a(1695),l=a.n(s);a(642);let i={title:"IRU FoodFlow",description:"Okul yemek talep y\xf6netim sistemi"};function n({children:e}){return r.jsx("html",{lang:"tr",children:r.jsx("body",{className:`${l().variable} antialiased`,children:e})})}},7418:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(1645);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},642:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[916,617,948,175],()=>a(8888));module.exports=r})();